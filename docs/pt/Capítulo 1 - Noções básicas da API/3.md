# **Cap√≠tulo 1.3: Formato JSON**
**Tempo de estudo:** 35 minutos

---

#### **1. JSON: A Linguagem da Comunica√ß√£o Espacial**
Imagine que uma sonda espacial e o Centro de Controle da Miss√£o falem idiomas diferentes. **JSON (JavaScript Object Notation)** √© uma *linguagem de dados universal*, compreendida por humanos e m√°quinas. Como a linguagem internacional dos astronautas!

**Principais propriedades:**

- ü™∂ Leve: transmiss√£o r√°pida mesmo com sinal fraco
- üëÄ Leg√≠vel por humanos: a estrutura √© vis√≠vel a olho nu
- üîÑ Universal: suportado por todas as linguagens de programa√ß√£o

> üí° **Analogia Espacial:**

> JSON √© como um telegrama digital com dados sobre estrelas. Em vez de c√≥digo Morse, estruturas claras `{chave: valor}`.

---

#### **2. Anatomia de uma Mensagem JSON**
JSON consiste em dois tipos de estruturas:

**A. Objetos (Naves Espaciais)**
```json
{
  "name": "Voyager-1",
  "launch_year": 1977,
  "is_active": true,
  "position": [-19.1, 42.7, 0.3]
}
```

**B. Arrays (Aglomerados Estelares)**
```json
[
  {"name": "Sirius", "magnitude": -1.46},
  {"name": "Canopus", "magnitude": -0.74},
  {"name": "Arcturus", "magnitude": -0.05}
]
```

**‚ö° Regras de sintaxe:**

- Chaves entre aspas `" "`
- Valores: strings, n√∫meros, booleanos (`true`/`false`), `null`
- Dados separados por v√≠rgulas
- Chaves `{}` para objetos, colchetes `[]` para arrays

---

#### **3. JSON vs XML: A Batalha dos Formatos**
| Par√¢metro       | JSON (Sat√©lite Moderno)          | XML (Telesc√≥pio Antigo)        |
|----------------|----------------------------------|--------------------------------|
| **Legibilidade** | Alta (acesso direto aos campos)  | Baixa (tags `<planet>...</planet>`) |
| **Tamanho**    | Compacto                         | Volumoso (+30% ao tamanho)    |
| **Processamento** | R√°pido                          | Lento                          |
| **Exemplo**    | `{"planet": "Mars"}`             | `<planet>Mars</planet>`        |

> **üî≠ Por que JSON venceu no espa√ßo?**

> APIs da NASA, SpaceX e ESA usam JSON ‚Äî √© ideal para transmiss√£o de dados!

---

#### **4. Trabalhando com JSON em C√≥digo**
**Exemplo Python (obtendo dados sobre a Lua):**
```python
import requests
import json

# Usamos uma API real, por exemplo, para obter dados do Sistema Solar
# da The Solar System OpenData API
try:
    response = requests.get("https://api.le-systeme-solaire.net/rest/bodies/terre")
    response.raise_for_status() # Verifica por erros HTTP (4xx, 5xx)

    planet_data = response.json()

    print(f"Nome: {planet_data['englishName']}")
    print(f"Luas: {[moon['moon'] for moon in planet_data['moons']]}")

    # Converte o dicion√°rio Python em uma string JSON para salvar
    planet_json_str = json.dumps(planet_data, indent=2, ensure_ascii=False) # ensure_ascii=False para caracteres cir√≠licos
    print("\n--- JSON Formatado ---")
    print(planet_json_str)

except requests.exceptions.RequestException as e:
    print(f"Erro na requisi√ß√£o: {e}")
```

**Exemplo JavaScript (processamento de dados do telesc√≥pio):**
```javascript
const Data = `{
  "id": "terre",
  "name": "La Terre",
  "englishName": "Earth",
  "isPlanet": true,
  "moons": [
    {
      "moon": "La Lune",
      "rel": "https://api.le-systeme-solaire.net/rest/bodies/lune"
    }
  ],
  "semimajorAxis": 149598023,
  "perihelion": 147095000,
  "aphelion": 152100000,
  "eccentricity": 0.0167,
  "inclination": 0,
  "mass": {
    "massValue": 5.97237,
    "massExponent": 24
  },
  "vol": {
    "volValue": 1.08321,
    "volExponent": 12
  },
  "density": 5.5136,
  "gravity": 9.8,
  "escape": 11190,
  "meanRadius": 6371.0084,
  "equaRadius": 6378.1366,
  "polarRadius": 6356.8,
  "flattening": 0.00335,
  "dimension": "",
  "sideralOrbit": 365.256,
  "sideralRotation": 23.9345,
  "aroundPlanet": null,
  "discoveredBy": "",
  "discoveryDate": "",
  "alternativeName": "",
  "axialTilt": 23.4393,
  "avgTemp": 288,
  "mainAnomaly": 358.617,
  "argPeriapsis": 85.901,
  "longAscNode": 18.272,
  "bodyType": "Planet"
}`;

const dataObj = JSON.parse(Data);
console.log(dataObj.target);
```

---

#### **5. Valida√ß√£o JSON: Verificando o "Sinal"**
Antes de usar os dados, certifique-se de que o JSON:

1. Tem a estrutura correta (verifique os par√™nteses/chaves!)

2. Cont√©m os campos esperados

3. N√£o possui erros de sintaxe

**Ferramentas:**
- [JSONLint](https://jsonlint.com/) (como um detector de lixo espacial para JSON)
- Parsers de linguagem integrados (ir√£o lan√ßar um erro se o formato estiver incorreto)

> ‚ö†Ô∏è **Exemplo de erro:**

> `{"planet": "Mars"` ‚Üí Sem chave de fechamento!

> Solu√ß√£o: Sempre use `json.loads()` no Python ou `JSON.parse()` no JS para verifica√ß√£o.

---

#### **Quiz para fixa√ß√£o**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. JSON significa...</p>
      <label><input type="radio" name="q1" value="a"> a) Java Space Object Notation</label>
      <label><input type="radio" name="q1" value="b"> b) JavaScript Object Notation</label>
      <label><input type="radio" name="q1" value="c"> c) Jupiter's Satellite Orbital Network</label>
    </div>
    <div class="question">
      <p>2. Como um objeto √© representado em JSON:</p>
      <label><input type="radio" name="q2" value="a"> a) ()</label>
      <label><input type="radio" name="q2" value="b"> b) {}</label>
      <label><input type="radio" name="q2" value="c"> c) []</label>
    </div>
    <div class="question">
      <p>3. O que N√ÉO √© um valor v√°lido em JSON?</p>
      <label><input type="radio" name="q3" value="a"> a) "name": "Saturn"</label>
      <label><input type="radio" name="q3" value="b"> b) "radius_km": 58232</label>
      <label><input type="radio" name="q3" value="c"> c) "has_rings": undefined</label>
    </div>
    <div class="question">
      <p>4. Por que JSON √© melhor que XML para APIs espaciais?</p>
      <label><input type="radio" name="q4" value="a"> a) Menor tamanho e alta velocidade</label>
      <label><input type="radio" name="q4" value="b"> b) Suporte a codifica√ß√µes alien√≠genas</label>
      <label><input type="radio" name="q4" value="c"> c) Capacidade de armazenar v√≠deo</label>
    </div>
    <div class="question">
      <p>5. Como converter uma string JSON em um objeto Python?</p>
      <label><input type="radio" name="q5" value="a"> a) json.parse()</label>
      <label><input type="radio" name="q5" value="b"> b) json.to_object()</label>
      <label><input type="radio" name="q5" value="c"> c) json.loads()</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">Verificar</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'c', q4: 'a', q5: 'c' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>Resultados:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Pergunta ${question.slice(1)}: <span style="color:green;">Correto!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Pergunta ${question.slice(1)}: <span style="color:red;">Incorreto.</span> Resposta correta: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Pergunta ${question.slice(1)}: <span style="color:orange;">Nenhuma resposta.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Seu resultado: ${score} de ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**üöÄ Resumo do cap√≠tulo:**

JSON √© o "Esperanto espacial" do mundo das APIs. Conhecendo sua estrutura, voc√™ ser√° capaz de:

- üì° Receber dados de telesc√≥pios e sondas

- üîß Converter informa√ß√µes entre sistemas

- üõ∞Ô∏è Salvar dados cient√≠ficos em arquivos

**Prepare-se para a acoplagem!** No pr√≥ximo cap√≠tulo, exploraremos a arquitetura REST API ‚Äî o sistema de gerenciamento da "esta√ß√£o espacial" do seu servidor.

> üìå **Pr√°tica:** Acesse [NASA Open APIs](https://api.nasa.gov/), encontre a API de asteroides (Asteroids NeoWs) e estude a estrutura JSON na resposta!