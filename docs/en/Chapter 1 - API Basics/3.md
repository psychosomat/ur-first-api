# **Chapter 1.3: JSON Format**
**Study time:** 35 minutes

---

#### **1. JSON: The Language of Space Communication**
Imagine that a space probe and the MCC speak different languages. **JSON (JavaScript Object Notation)** is a *universal data language* that is understandable to both humans and machines. Like the international language of astronauts!

**Main properties:**

- 🪶 Lightweight: fast transmission even with a weak signal
- 👀 Human-readable: the structure is visible to the naked eye
- 🔄 Universal: supported by all programming languages

> 💡 **Space analogy:**
> 
> JSON is like a digital telegram with data about stars. Instead of Morse code, there are clear `{key: value}` structures.

---

#### **2. Anatomy of a JSON message**
JSON consists of two types of structures:

**A. Objects (Spaceships)**
```json
{
  "name": "Voyager-1",
  "launch_year": 1977,
  "is_active": true,
  "position": [-19.1, 42.7, 0.3]
}
```

**B. Arrays (Star clusters)**
```json
[
  {"name": "Sirius", "magnitude": -1.46},
  {"name": "Canopus", "magnitude": -0.74},
  {"name": "Arcturus", "magnitude": -0.05}
]
```

**⚡ Syntax rules:**

- Keys in double quotes " "
- Values: strings, numbers, boolean (`true`/`false`), `null`
- Data is separated by commas
- Curly braces `{}` for objects, square brackets `[]` for arrays

---

#### **3. JSON vs XML: The Battle of Formats**
| Parameter      | JSON (Modern satellite)          | XML (Old telescope)            |
|----------------|----------------------------------|--------------------------------|
| **Readability**| High (direct access to fields)   | Low (tags `<planet>...</planet>`) |
| **Size**       | Compact                          | Bulky (+30% to size)           |
| **Processing** | Fast                             | Slow                           |
| **Example**    | `{"planet": "Mars"}`             | `<planet>Mars</planet>`        |

> **🔭 Why did JSON win in space?**
> 
> The NASA, SpaceX, and ESA APIs use JSON - it's ideal for data transmission!

---

#### **4. Working with JSON in code**
**Python example (getting data about the Moon):**
```python
import requests
import json

# We use a real API, for example, to get data about the Solar System
# from The Solar System OpenData API
try:
    response = requests.get("https://api.le-systeme-solaire.net/rest/bodies/terre")
    response.raise_for_status() # Check for HTTP errors (4xx, 5xx)

    planet_data = response.json()

    print(f"Name: {planet_data['englishName']}")
    print(f"Satellites: {[moon['moon'] for moon in planet_data['moons']]}")

    # Convert a Python dictionary to a JSON string for saving
    planet_json_str = json.dumps(planet_data, indent=2, ensure_ascii=False) # ensure_ascii=False for Cyrillic
    print("\n--- Formatted JSON ---")
    print(planet_json_str)

except requests.exceptions.RequestException as e:
    print(f"Request error: {e}")
```

**JavaScript example (processing telescope data):**
```javascript
const Data = `{ 
  "id": "terre",
  "name": "La Terre",
  "englishName": "Earth",
  "isPlanet": true,
  "moons": [
    {
      "moon": "La Lune",
      "rel": "https://api.le-systeme-solaire.net/rest/bodies/lune"
    }
  ],
  "semimajorAxis": 149598023,
  "perihelion": 147095000,
  "aphelion": 152100000,
  "eccentricity": 0.0167,
  "inclination": 0,
  "mass": {
    "massValue": 5.97237,
    "massExponent": 24
  },
  "vol": {
    "volValue": 1.08321,
    "volExponent": 12
  },
  "density": 5.5136,
  "gravity": 9.8,
  "escape": 11190,
  "meanRadius": 6371.0084,
  "equaRadius": 6378.1366,
  "polarRadius": 6356.8,
  "flattening": 0.00335,
  "dimension": "",
  "sideralOrbit": 365.256,
  "sideralRotation": 23.9345,
  "aroundPlanet": null,
  "discoveredBy": "",
  "discoveryDate": "",
  "alternativeName": "",
  "axialTilt": 23.4393,
  "avgTemp": 288,
  "mainAnomaly": 358.617,
  "argPeriapsis": 85.901,
  "longAscNode": 18.272,
  "bodyType": "Planet"
}`;

const dataObj = JSON.parse(Data);
console.log(dataObj.target);
```

---

#### **5. JSON Validation: Checking the "Signal"**
Before using the data, make sure the JSON:

1. Has the correct structure (check the brackets!)

2. Contains the expected fields

3. Has no syntax errors

**Tools:**
- [JSONLint](https://jsonlint.com/) (like a space debris detector for JSON)
- Built-in language parsers (will throw an error for an incorrect format)

> ⚠️ **Example of an error:**
> 
> `{"planet": "Mars"` → No closing bracket!
> 
> Solution: Always use `json.loads()` in Python or `JSON.parse()` in JS for validation.

---

#### **Quiz for reinforcement**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. JSON stands for...</p>
      <label><input type="radio" name="q1" value="a"> a) Java Space Object Notation</label>
      <label><input type="radio" name="q1" value="b"> b) JavaScript Object Notation</label>
      <label><input type="radio" name="q1" value="c"> c) Jupiter's Satellite Orbital Network</label>
    </div>
    <div class="question">
      <p>2. How is an object denoted in JSON:</p>
      <label><input type="radio" name="q2" value="a"> a) ()</label>
      <label><input type="radio" name="q2" value="b"> b) {}</label>
      <label><input type="radio" name="q2" value="c"> c) []</label>
    </div>
    <div class="question">
      <p>3. What is NOT a valid value in JSON?</p>
      <label><input type="radio" name="q3" value="a"> a) "name": "Saturn"</label>
      <label><input type="radio" name="q3" value="b"> b) "radius_km": 58232</label>
      <label><input type="radio" name="q3" value="c"> c) "has_rings": undefined</label>
    </div>
    <div class="question">
      <p>4. Why is JSON better than XML for space APIs?</p>
      <label><input type="radio" name="q4" value="a"> a) Smaller size and high speed</label>
      <label><input type="radio" name="q4" value="b"> b) Support for alien encodings</label>
      <label><input type="radio" name="q4" value="c"> c) Ability to store video</label>
    </div>
    <div class="question">
      <p>5. How to convert a JSON string to a Python object?</p>
      <label><input type="radio" name="q5" value="a"> a) json.parse()</label>
      <label><input type="radio" name="q5" value="b"> b) json.to_object()</label>
      <label><input type="radio" name="q5" value="c"> c) json.loads()</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">Check</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'c', q4: 'a', q5: 'c' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>Results:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:green;">Correct!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:red;">Incorrect.</span> The correct answer is: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:orange;">No answer.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Your score: ${score} out of ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**🚀 Chapter summary:**

JSON is the "space Esperanto" of the API world. Knowing its structure, you can:

- 📡 Receive data from telescopes and probes

- 🔧 Convert information between systems

- 🛰️ Save scientific data in files

**Get ready for docking!** In the next chapter, we will study the REST API architecture - the control system of your server's "space station".

> **📌 Practice:** Go to [NASA Open APIs](https://api.nasa.gov/), find the Asteroids NeoWs API, and study the JSON structure in the response!