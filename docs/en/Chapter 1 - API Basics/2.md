# **Chapter 1.2: HTTP Methods and Status Codes**
**Study time:** 40 minutes

---

#### **1. HTTP: The Language of Communication in Space**
Imagine you are the **Mission Control Center (MCC)**, and the API server is a **spaceship**. HTTP (HyperText Transfer Protocol) is the **radio communication** between you.

Each message contains:

- **Method** → What to do (e.g., "launch a probe")

- **Status code** → Result of the operation ("probe launched successfully!")

> 💡 **Space analogy:**
> `GET /stars` = "MCC → Ship: Report star coordinates!"
> `200 OK` = "Ship → MCC: Coordinates transmitted!"

---

#### **2. Basic HTTP Methods**
Each method is like a type of command for a space mission:

| Method   | Space Analogy                  | Example Request            | Description               |
|----------|--------------------------------|----------------------------|---------------------------|
| **GET**  | Requesting data (telescope)    | `GET /planets`             | Get a list of planets     |
| **POST** | Sending a new object (rocket launch) | `POST /satellites`         | Create a new satellite    |
| **PUT**  | Full object update (orbit correction) | `PUT /satellites/iss`      | Update ISS data           |
| **DELETE**| Destroying an object (de-orbiting) | `DELETE /debris/123`       | Delete space debris       |

**⚡ Code Example (Python):**
```python
import requests

# GET: Get data about the Falcon 9 rocket
# Using a real SpaceX API endpoint
response = requests.get("https://api.spacexdata.com/v4/rockets/5e9d0d95eda69973a809d1ec")
print(response.status_code, response.json()['name']) # 200 Falcon 9

# POST: Create a new post in a test API
# Using the jsonplaceholder sandbox service
new_post = {"title": "Artemis Mission", "body": "Ready for launch", "userId": 1}
response = requests.post("https://jsonplaceholder.typicode.com/posts", json=new_post)
print(response.status_code, response.json()['id'])  # 201 101 (or another ID)
```

---

#### **3. Important Status Codes**
The server's response is like a signal from a spacecraft:

| Group  | Code | Space Analogy                        | Description               |
|--------|------|--------------------------------------|---------------------------|
| `2xx`  | 200  | ✅ "Mission accomplished!"           | Success                   |
|        | 201  | 🚀 "Rocket launched!"                | Object created            |
| `3xx`  | 301  | 🌍 "MCC has moved to a new address"  | Redirection               |
| `4xx`  | 400  | ❌ "Incorrect coordinates in the request!" | Client error              |
|        | 404  | 🪐 "Planet not found!"               | Resource not found        |
| `5xx`  | 500  | 🔥 "Engine failure!"                 | Server error              |

---

#### **4. Practice: Handling Status Codes**
Always check the API response! Example of error handling:
```python
import requests

def get_post_data(post_id):
    """Function to get post data with status code handling."""
    try:
        response = requests.get(f"https://jsonplaceholder.typicode.com/posts/{post_id}")

        # Check the response status code
        if response.status_code == 200:
            print(f"✅ Data for post {post_id} successfully received!")
            return response.json()
        elif response.status_code == 404:
            print(f"⚠️ Resource for post {post_id} not found!")
            return None
        else:
            # Handle other client (4xx) or server (5xx) errors
            print(f"🚨 An error occurred! Status code: {response.status_code}")
            return None

    except requests.exceptions.RequestException as e:
        # Handle connection errors (e.g., no internet)
        print(f"🔥 Connection error: {e}")
        return None

# --- Testing our function ---
print("--- Searching for an existing post ---")
get_post_data(1)

print("\n--- Searching for a non-existent post ---")
get_post_data(9999) # This post does not exist, we expect a 404
```

> **🔭 Example from a real API (SpaceX):**
> Request: `GET https://api.spacexdata.com/v4/ships/OCISLY`
> Response: `200 OK` + ship data
> Request: `GET https://api.spacexdata.com/v4/ships/UNICORN`
> Response: `404 Not Found`

---

#### **Quiz for reinforcement**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. Which method should be used to get data about stars?</p>
      <label><input type="radio" name="q1" value="a"> a) POST</label>
      <label><input type="radio" name="q1" value="b"> b) PUT</label>
      <label><input type="radio" name="q1" value="c"> c) GET</label>
    </div>
    <div class="question">
      <p>2. The status `201 Created` means:</p>
      <label><input type="radio" name="q2" value="a"> a) Object deleted</label>
      <label><input type="radio" name="q2" value="b"> b) Object created</label>
      <label><input type="radio" name="q2" value="c"> c) Server error</label>
    </div>
    <div class="question">
      <p>3. The code `404` in the space analogy is:</p>
      <label><input type="radio" name="q3" value="a"> a) "Rocket on the launchpad!"</label>
      <label><input type="radio" name="q3" value="b"> b) "Planet not found!"</label>
      <label><input type="radio" name="q3" value="c"> c) "Invalid command format!"</label>
    </div>
    <div class="question">
      <p>4. The method for a full update of satellite data:</p>
      <label><input type="radio" name="q4" value="a"> a) PATCH</label>
      <label><input type="radio" name="q4" value="b"> b) DELETE</label>
      <label><input type="radio" name="q4" value="c"> c) PUT</label>
    </div>
    <div class="question">
      <p>5. What does the status `500 Internal Server Error` mean?</p>
      <label><input type="radio" name="q5" value="a"> a) Error in the client's request</label>
      <label><input type="radio" name="q5" value="b"> b) Failure on the server</label>
      <label><input type="radio" name="q5" value="c"> c) Successful execution</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">Check</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'c', q2: 'b', q3: 'b', q4: 'c', q5: 'b' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>Results:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:green;">Correct!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:red;">Incorrect.</span> The correct answer is: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:orange;">No answer.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Your score: ${score} out of ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**🚀 Chapter summary:**
HTTP methods are your commands for space missions, and status codes are reports on their execution. Remember:
> `GET` = "Give me data", `POST` = "Create new", `PUT` = "Update all", `DELETE` = "Destroy"
> `2xx` = Success, `4xx` = Your error, `5xx` = Server problem

**Get ready for launch!** In the next chapter, we will decipher "telegrams" from the server - the JSON format.

> **📌 Practice:** Use the [SpaceX API](https://docs.spacexdata.com/) to send `GET /launches/latest` and study the response codes!