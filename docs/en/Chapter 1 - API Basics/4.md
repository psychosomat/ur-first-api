# **Chapter 1.4: REST API Structure**
**Study time:** 45 minutes

---

#### **1. REST API: The Architecture of a Space Station**
Imagine a space station where each module has:

- **A standard docking port** (a unified interface)

- **Clear specialization** (living quarters, laboratory, storage)

- **A coordinate system** (precise location)

A **REST (Representational State Transfer)** API works on the same principles:

- A unified interface for all resources

- Clear separation of components

- Addressing via URI (space coordinates)

> üí° **Key idea:**
>
> Each resource (planets, rockets, astronauts) has a unique URL and interacts through HTTP methods.

---

#### **2. The 6 Principles of REST in a Space Analogy**
| REST Principle        | Analogy on the ISS               | Meaning for the API                  |
|-----------------------|----------------------------------|--------------------------------------|
| **Unified Interface** | Standard docking ports           | The same rules for all requests      |
| **Stateless**         | Each command is self-sufficient  | The server does not store client state |
| **Caching**           | Local supplies of provisions     | Saving frequent responses            |
| **Client-Server**     | Clear separation: MCC ‚Üî Station  | Independent development of components|
| **Layered System**    | Relay satellites                 | Proxies, load balancers              |
| **Code on Demand**    | Loading software for experiments | (Optional) Transferring scripts      |

---

#### **3. Resources and URIs: Space Coordinates**
Each object in the API is a resource with a unique address:
```
https://api.spacexdata.com/v4/    ‚Üê Base URL
          rockets/            ‚Üê Collection of rockets
          rockets/5e9d0d95eda69973a809d1ec ‚Üê A specific rocket (by ID)
```

**Examples of space resources:**

- `GET /stars` ‚Üí List of stars
- `GET /stars/sirius` ‚Üí Data about Sirius
- `POST /satellites` ‚Üí Launch a new satellite
- `PUT /missions/artemis` ‚Üí Update a mission

**URI hierarchy diagram:**
```
[Base URL]
‚îú‚îÄ‚îÄ /planets          ‚Üí Collection of planets
‚îÇ   ‚îú‚îÄ‚îÄ /mars         ‚Üí "Mars" resource
‚îÇ   ‚îî‚îÄ‚îÄ /venus        ‚Üí "Venus" resource
‚îî‚îÄ‚îÄ /launches         ‚Üí Collection of launches
    ‚îú‚îÄ‚îÄ /upcoming     ‚Üí Sub-collection
    ‚îî‚îÄ‚îÄ /latest       ‚Üí Resource
```

---

#### **4. CRUD Operations via HTTP Methods**
| Operation | HTTP Method | Example (Space Station)          | Server Response |
|----------|------------|----------------------------------|---------------|
| **Create** | `POST`   | Send a new module                | `201 Created` |
| **Read**   | `GET`    | Request data about a module      | `200 OK`      |
| **Update** | `PUT`    | Reconfigure a module             | `200 OK`      |
| **Delete** | `DELETE` | Undock an old module             | `204 No Content`|

**‚ö° Code Example (Adding a satellite):**
```python
import requests

# We use a test service that simulates the creation of a resource
new_post = {
    "title": "New Telescope Launch",
    "body": "Hubble-2 is ready for deployment.",
    "userId": 1
}

# Conditional API key for demonstrating headers
headers = {
    "Authorization": "Bearer YOUR_DEMO_KEY",
    "Content-Type": "application/json; charset=UTF-8"
}

response = requests.post(
    "https://jsonplaceholder.typicode.com/posts",
    json=new_post,
    headers=headers
)

if response.status_code == 201:
    print("‚úÖ Post about the new satellite created successfully!")
    print("Server response:")
    print(response.json())
else:
    print(f"‚ùå Error! Status: {response.status_code}")
```

---

#### **5. API Versioning: The Evolution of the Station**
Just as the ISS is updated (Zarya module ‚Üí Nauka), APIs change versions:

- In the URL: `https://api.spacex.com/v4/rockets`
- In the headers: `Accept: application/vnd.spacex-v5+json`

**Why it's important:**

- v1: Basic functionality
- v2: New fields added
- v3: Response structure changed

> ‚ö†Ô∏è **Tip:** Always specify the version in requests, otherwise the "docking" may fail!

---

#### **6. Hypermedia (HATEOAS): Navigation in Space**
The API response contains links to related resources - like a map of the station:
```json
{
  "id": "iss",
  "name": "International Space Station",
  "crew": 7,
  "_links": {
    "self": { "href": "/stations/iss" },
    "modules": { "href": "/stations/iss/modules" },
    "schedule": { "href": "/stations/iss/schedule" }
  }
}
```

---

#### **Quiz for reinforcement**


<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. REST stands for:</p>
      <label><input type="radio" name="q1" value="a"> a) Rocket Engine System Transfer</label>
      <label><input type="radio" name="q1" value="b"> b) Representational State Transfer</label>
      <label><input type="radio" name="q1" value="c"> c) Remote Space Technology</label>
    </div>
    <div class="question">
      <p>2. The "Stateless" principle means:</p>
      <label><input type="radio" name="q2" value="a"> a) The server stores the history of requests</label>
      <label><input type="radio" name="q2" value="b"> b) Each request is self-sufficient</label>
      <label><input type="radio" name="q2" value="c"> c) Data is transmitted only via SSL</label>
    </div>
    <div class="question">
      <p>3. The URI for getting data about the Falcon Heavy rocket:</p>
      <label><input type="radio" name="q3" value="a"> a) POST /rockets/falcon-heavy</label>
      <label><input type="radio" name="q3" value="b"> b) GET /falcon-heavy</label>
      <label><input type="radio" name="q3" value="c"> c) GET /rockets/falcon-heavy</label>
    </div>
    <div class="question">
      <p>4. The method for a full update of a resource:</p>
      <label><input type="radio" name="q4" value="a"> a) PATCH</label>
      <label><input type="radio" name="q4" value="b"> b) POST</label>
      <label><input type="radio" name="q4" value="c"> c) PUT</label>
    </div>
    <div class="question">
      <p>5. HATEOAS in an API is:</p>
      <label><input type="radio" name="q5" value="a"> a) A system of links to related resources</label>
      <label><input type="radio" name="q5" value="b"> b) An encryption protocol</label>
      <label><input type="radio" name="q5" value="c"> c) A query language</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">Check</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'c', q4: 'c', q5: 'a' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>Results:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:green;">Correct!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:red;">Incorrect.</span> The correct answer is: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:orange;">No answer.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Your score: ${score} out of ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**üöÄ Chapter summary:**

A REST API is a standardized "space station architecture" for web services. Remember:

- Resources = Objects (rockets, planets)
- URI = Object coordinates
- HTTP methods = Control commands
- Versions = Station upgrades

**Final preparation!** In the next chapter, we will launch a "test probe" - we will learn how to test an API using Postman.

> **üìå Practice:**
> Study the structure of the [SpaceX API](https://docs.spacexdata.com/) and try to execute:
>
> `GET https://api.spacexdata.com/v4/launches/latest` ‚Äî pay attention to the URI and the JSON structure!