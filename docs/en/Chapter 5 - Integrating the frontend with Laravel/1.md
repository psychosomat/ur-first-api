# **Chapter 5.1: Blade Templates in Laravel**
**Study time:** 40 minutes

---

### **1. What is Blade? Your "Smart" Blueprint**

Until now, we have worked with two extremes: a pure `index.html` and a pure JSON response from the API. But how do we create full-fledged web pages that dynamically display data from our backend?

**Blade** is Laravel's built-in templating engine. It allows us to write regular HTML, but with "superpowers":

-   Insert variables and execute PHP code with an elegant syntax.
-   Create reusable page "layouts" (headers, footers).
-   Use loops and conditions directly in the HTML code.
-   Automatically protect against XSS attacks.

> ðŸ’¡ **Space Analogy:**
>
> Imagine that HTML is a simple blueprint of a spaceship. Blade is an advanced CAD system. You don't just draw lines, you add "smart" objects. You say, "Here will be the crew list," and Blade automatically requests the data and fills it in. "Here will be the main screen," and Blade inserts the standard interface.

All Blade files have the `.blade.php` extension and are stored in the `resources/views/` folder.

---

### **2. Basic Syntax: Displaying Data**
The simplest thing Blade does is output data.

**The `{{ }}` Syntax**

These double curly braces are a command for Blade to "take a variable and safely output its contents."

**Example:**

1.  **Route in `routes/web.php`:**
    ```php
	<?php
    Route::get('/mission-briefing', function () {
        $mission = 'Explore the Kepler-186 system';
        return view('briefing', ['mission_name' => $mission]);
    });
    ```

    -   `view('briefing', ...)` tells Laravel to find the `resources/views/briefing.blade.php` file.
    -   `['mission_name' => $mission]` is an array of data that we "pass" to our view.

2.  **View in `resources/views/briefing.blade.php`:**
    ```html
    <h1>Mission Control Briefing</h1>
    <p>Current task: {{ $mission_name }}</p>
    ```

**Result in the browser at `/mission-briefing`:**
```html
<h1>Mission Control Briefing</h1>
<p>Current task: Explore the Kepler-186 system</p>
```

> ðŸ›¡ï¸ **Important to know:** Blade automatically escapes all data within `{{ }}`. This means that if a variable contains HTML tags or a malicious script, they will be output as plain text, not executed. This is a built-in protection against XSS attacks.

> *To output unescaped HTML (do this with caution!), use the `{!! $variable !!}` syntax.*

---

### **3. Directives: Adding Logic to HTML**
Blade directives start with the `@` symbol. They allow you to use loops, conditions, and much more.

**Conditions (`@if`, `@else`):**
```php
@if($planet->is_habitable)
    <p style="color: green;">The planet is habitable!</p>
@else
    <p style="color: red;">A spacesuit is required. The atmosphere is hostile.</p>
@endif
```

**Loops (`@foreach`, `@forelse`):**

`@forelse` is a very convenient directive that combines a loop and a check for emptiness.
```php
<h2>List of planets in the system:</h2>
<ul>
    @forelse($planets as $planet)
        <li>
            {{ $loop->iteration }}. {{ $planet->name }}
            <!-- $loop is a special variable available in the loop -->
        </li>
    @empty
        <li>No planets have been detected in this system.</li>
    @endforelse
</ul>
```

---

### **4. Layouts and Sections: Don't Repeat Yourself (DRY)**
The most powerful feature of Blade is the creation of reusable layouts. You don't need to copy the site header and footer to every page.

**Step 1: Create a master layout**

Create a file `resources/views/layouts/app.blade.php`:
```php
<?php
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Mission Control - @yield('title')</title>
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
</head>
<body>
    <header>
        <h1>Galactic Fleet Command Center</h1>
    </header>

    <main>
        @yield('content') <!-- The unique content of the page will be here -->
    </main>

    <footer>
        <p>&copy; {{ date('Y') }} Space Command. All rights reserved.</p>
    </footer>
</body>
</html>
```
-   `@yield('title')` and `@yield('content')` are "slots" or "placeholders".

**Step 2: Create a child view that uses the layout**

Create a file `resources/views/planets/index.blade.php`:
```php
<?php
@extends('layouts.app') {{-- Inherit our master layout --}}

@section('title', 'List of Planets') {{-- Fill the 'title' section --}}

@section('content') {{-- Fill the main 'content' section --}}
    <h2>Registered Planets</h2>
    <p>This is a list of all worlds known to us.</p>
    {{-- Your @forelse loop for displaying planets can be here --}}
@endsection
```

Now, when Laravel renders `planets.index`, it will first take `layouts.app`, and then insert the content from the `@section` sections into it.

---

### **Quiz to Reinforce**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. What extension do Blade template files have?</p>
      <label><input type="radio" name="q1" value="a"> a) .html</label>
      <label><input type="radio" name="q1" value="b"> b) .blade.php</label>
      <label><input type="radio" name="q1" value="c"> c) .php.blade</label>
    </div>
    <div class="question">
      <p>2. How do you safely output the `$name` variable in Blade?</p>
      <label><input type="radio" name="q2" value="a"> a) <?php echo $name; ?></label>
      <label><input type="radio" name="q2" value="b"> b) {{ $name }}</label>
      <label><input type="radio" name="q2" value="c"> c) [[$name]]</label>
    </div>
    <div class="question">
      <p>3. Which directive is used to inherit a master layout?</p>
      <label><input type="radio" name="q3" value="a"> a) @include('layouts.app')</label>
      <label><input type="radio" name="q3" value="b"> b) @layout('layouts.app')</label>
      <label><input type="radio" name="q3" value="c"> c) @extends('layouts.app')</label>
    </div>
    <div class="question">
      <p>4. What does the `@yield('content')` directive do?</p>
      <label><input type="radio" name="q4" value="a"> a) Defines a placeholder (a place to insert content)</label>
      <label><input type="radio" name="q4" value="b"> b) Inserts the content of the `content.blade.php` file</label>
      <label><input type="radio" name="q4" value="c"> c) Ends a content section</label>
    </div>
    <div class="question">
      <p>5. Which directive is ideal for looping through an array that might be empty?</p>
      <label><input type="radio" name="q5" value="a"> a) @foreach</label>
      <label><input type="radio" name="q5" value="b"> b) @while</label>
      <label><input type="radio" name="q5" value="c"> c) @forelse</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">Check</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'c', q4: 'a', q5: 'c' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>Results:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:green;">Correct!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:red;">Incorrect.</span> Correct answer: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Question ${question.slice(1)}: <span style="color:orange;">No answer.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Your score: ${score} out of ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**ðŸš€ Chapter Summary:**

You have learned the basics of Blade â€” a powerful tool for creating dynamic web pages. You can now:

-   Output data with automatic XSS protection.
-   Use directives to add logic (`@if`, `@forelse`).
-   Create reusable layouts using `@extends` and `@yield`.

**We have prepared the "blueprints" for our ship's control panels.** In the next chapter, we will create specific "panels" (views) for our API and display real data on them.