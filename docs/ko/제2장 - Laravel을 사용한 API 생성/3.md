# **ì±•í„° 2.3: ë°ì´í„°ë² ì´ìŠ¤ ë§ˆì´ê·¸ë ˆì´ì…˜**
**í•™ìŠµ ì‹œê°„:** 50ë¶„

---

#### **1. ë§ˆì´ê·¸ë ˆì´ì…˜: ìš°ì£¼ ì •ê±°ì¥ ê±´ì„¤**
Laravelì˜ **ë§ˆì´ê·¸ë ˆì´ì…˜**ì€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ìœ„í•œ ë²„ì „ ê´€ë¦¬ ì‹œìŠ¤í…œì…ë‹ˆë‹¤.

ë‹¤ìŒê³¼ ê°™ì´ ìƒìƒí•´ ë³´ì„¸ìš”:

1. ğŸ—ï¸ ì •ê±°ì¥ ì„¤ê³„ë„ë¥¼ ë§Œë“­ë‹ˆë‹¤ (`create_planets_table` ë§ˆì´ê·¸ë ˆì´ì…˜)
2. ğŸš€ ëª¨ë“ˆì„ ë°°í¬í•©ë‹ˆë‹¤ (ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰)
3. ğŸ”§ êµ¬ì¡°ë¥¼ í˜„ëŒ€í™”í•©ë‹ˆë‹¤ (ìƒˆë¡œìš´ ë§ˆì´ê·¸ë ˆì´ì…˜)
4. âª ì´ì „ ë²„ì „ìœ¼ë¡œ ë˜ëŒë¦´ ìˆ˜ ìˆìŠµë‹ˆë‹¤ (ë¡¤ë°±)

> ğŸ’¡ **ì¤‘ìš”:** ë§ˆì´ê·¸ë ˆì´ì…˜ì€ íŒ€ì´ ì¼ê´€ë˜ê²Œ ì‘ì—…í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤ â€” ë§ˆì¹˜ ë‹¤ë¥¸ ëŒ€ë¥™ì—ì„œ ISSë¥¼ ê±´ì„¤í•˜ëŠ” ì—”ì§€ë‹ˆì–´ë“¤ì²˜ëŸ¼ìš”!

---

#### **2. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰**
ì±•í„° 2.2ì—ì„œ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ìƒì„±í•œ í›„ ë‹¤ìŒì„ ì‹¤í–‰í•˜ì„¸ìš”:
```bash
php artisan migrate
```

**í„°ë¯¸ë„ ì¶œë ¥:**
```
ë§ˆì´ê·¸ë ˆì´ì…˜ í…Œì´ë¸”ì´ ì„±ê³µì ìœ¼ë¡œ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.
ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘: 2014_10_12_000000_create_users_table
ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ:  2014_10_12_000000_create_users_table (25.12ms)
ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘: 2014_10_12_100000_create_password_reset_tokens_table
ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ:  2014_10_12_100000_create_password_reset_tokens_table (18.07ms)
ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘: 2019_08_19_000000_create_failed_jobs_table
ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ:  2019_08_19_000000_create_failed_jobs_table (21.33ms)
ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘: 2019_12_14_000001_create_personal_access_tokens_table
ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ:  2019_12_14_000001_create_personal_access_tokens_table (30.45ms)
ë§ˆì´ê·¸ë ˆì´ì…˜ ì¤‘: 2025_08_04_000000_create_planets_table
ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ë£Œ:  2025_08_04_000000_create_planets_table (15.67ms)  # ë‹¹ì‹ ì˜ í…Œì´ë¸”!
```

**pgAdmin 4ì—ì„œ í™•ì¸:**

1. `space_api` ë°ì´í„°ë² ì´ìŠ¤ â†’ Schemas â†’ Tablesë¥¼ ì—½ë‹ˆë‹¤.
2. ë‹¤ìŒì´ ë‚˜íƒ€ë‚˜ëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”:   - `planets`   - `users`   - `password_reset_tokens`

---

#### **3. ë§ˆì´ê·¸ë ˆì´ì…˜ ë¡¤ë°±: ë¹„ìƒ ë³µê·€**
êµ¬ì¡°ë¥¼ ìˆ˜ì •í•´ì•¼ í•  ê²½ìš°:
```bash
php artisan migrate:rollback  # ë§ˆì§€ë§‰ ë§ˆì´ê·¸ë ˆì´ì…˜ íŒ¨í‚¤ì§€ ë¡¤ë°±
```
```bash
php artisan migrate:reset    # ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ ì™„ì „íˆ ë¡¤ë°±
```

- ```php artisan migrate:fresh``` â€” **ê°œë°œì—ì„œ ê°€ì¥ ìœ ìš©í•œ ëª…ë ¹ì–´ì…ë‹ˆë‹¤!** ëª¨ë“  í…Œì´ë¸”ì„ ì‚­ì œí•˜ê³  ëª¨ë“  ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ë‹¤ì‹œ ì‹¤í–‰í•©ë‹ˆë‹¤.
- ```php artisan migrate:fresh --seed``` â€” `fresh`ì™€ ë™ì¼í•˜ê²Œ ì‘ë™í•˜ì§€ë§Œ, ë§ˆì´ê·¸ë ˆì´ì…˜ í›„ ì¦‰ì‹œ ì‹œë”ë¥¼ ì‹¤í–‰í•©ë‹ˆë‹¤. ì´ê²ƒì€ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì™„ì „íˆ "ì´ˆê¸°í™”"í•˜ëŠ” ëª…ë ¹ì–´ì…ë‹ˆë‹¤.


**ì‚¬ìš© ì‹œë‚˜ë¦¬ì˜¤:**
```bash
# 1ë‹¨ê³„: ë§ˆì´ê·¸ë ˆì´ì…˜ì— ì˜¤ë¥˜ê°€ ìˆìŒì„ ê¹¨ë‹¬ì•˜ìŠµë‹ˆë‹¤. ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ì™„ì „íˆ ë‹¤ì‹œ ë§Œë“­ë‹ˆë‹¤.
php artisan migrate:fresh
# 2ë‹¨ê³„: ë§ˆì´ê·¸ë ˆì´ì…˜ì„ í¸ì§‘í•©ë‹ˆë‹¤.
# 3ë‹¨ê³„: ì´ë¯¸ ìˆ˜ì •ëœ ë§ˆì´ê·¸ë ˆì´ì…˜ìœ¼ë¡œ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë‹¤ì‹œ ë§Œë“­ë‹ˆë‹¤.
php artisan migrate:fresh
```

---

#### **4. ìƒˆ í•„ë“œ ì¶”ê°€: ì •ê±°ì¥ í˜„ëŒ€í™”**
**ì˜ˆì‹œ:** `is_habitable` í•„ë“œ(í–‰ì„±ì´ ê±°ì£¼ ê°€ëŠ¥í•œì§€ ì—¬ë¶€)ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.

**1ë‹¨ê³„: ìƒˆ ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„±**
```bash
php artisan make:migration add_is_habitable_to_planets_table
```

**2ë‹¨ê³„: íŒŒì¼ í¸ì§‘** `database/migrations/..._add_is_habitable_to_planets_table.php`
```php
<?php
public function up()
{
    Schema::table('planets', function (Blueprint $table) {
        $table->boolean('is_habitable')
              ->default(false);
    });
}

public function down()
{
    Schema::table('planets', function (Blueprint $table) {
        $table->dropColumn('is_habitable');
    });
}
```

**3ë‹¨ê³„: ì—…ë°ì´íŠ¸ ì‹¤í–‰**
```bash
php artisan migrate
```

---

#### **5. ë°ì´í„°ë² ì´ìŠ¤ ì±„ìš°ê¸°: ì²« ë²ˆì§¸ í–‰ì„±ë“¤**
**ì‹œë”(Seeder)**ë¥¼ ë§Œë“­ë‹ˆë‹¤ â€” í…ŒìŠ¤íŠ¸ ë°ì´í„°ë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ìŠ¤í¬ë¦½íŠ¸ì…ë‹ˆë‹¤.

**1ë‹¨ê³„: ì‹œë” ìƒì„±**
```bash
php artisan make:seeder PlanetSeeder
```

**2ë‹¨ê³„: í¸ì§‘** `database/seeders/PlanetSeeder.php`
```php
<?php
use App\Models\Planet; // í–‰ì„± ëª¨ë¸ì„ ì„í¬íŠ¸í•©ë‹ˆë‹¤ - ì—†ìœ¼ë©´ ì˜¤ë¥˜ê°€ ë°œìƒí•©ë‹ˆë‹¤!


class PlanetSeeder extends Seeder
{
    public function run()
    {
        Planet::create([
            'name' => 'ì§€êµ¬',
            'description' => 'ë‹¤ì–‘í•œ ìƒëª…ì²´ê°€ ìˆëŠ” í‘¸ë¥¸ í–‰ì„±',
            'size_km' => 12742,
            'solar_system' => 'íƒœì–‘ê³„',
            'image_url' => 'https://example.com/earth.jpg',
            'is_habitable' => true
        ]);

        Planet::create([
            'name' => 'í™”ì„±',
            'description' => 'ë¯¸ë˜ ì‹ë¯¼ì§€í™”ì˜ ëª©í‘œì¸ ë¶‰ì€ í–‰ì„±',
            'size_km' => 6779,
            'solar_system' => 'íƒœì–‘ê³„',
            'is_habitable' => false
        ]);
    }
}
```

**3ë‹¨ê³„: ì‹œë”ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤** `database/seeders/DatabaseSeeder.php`ì—
```php
<?php
public function run()
{
    $this->call([
        PlanetSeeder::class
    ]);
}
```

**4ë‹¨ê³„: ì±„ìš°ê¸° ì‹¤í–‰**
```bash
php artisan db:seed
```

---

#### **6. PostgreSQL ì‘ì—…: íŠ¹ì§•**
**ë°ì´í„° ìœ í˜• íŠ¹ì§•:**

| ê¸°ëŠ¥ | PostgreSQL | MySQL | Laravel ì£¼ì„ |
|---|---|---|---|
| **ë…¼ë¦¬ íƒ€ì…** | `boolean` (ì‹¤ì œ `true`/`false`) | `tinyint(1)` (`0`/`1` ì €ì¥) | `$table->boolean('...')` ë‘˜ ë‹¤ ì‘ë™ |
| **JSON** | `jsonb` (ë°”ì´ë„ˆë¦¬, ì¸ë±ì‹± ê°€ëŠ¥) | `json` (í…ìŠ¤íŠ¸) | `$table->jsonb('...')` - PGì—ì„œ ë§¤ìš° ê°•ë ¥í•¨ |
| **ë°°ì—´** | `text[]`, `integer[]` (ë„¤ì´í‹°ë¸Œ ë°°ì—´) | ì—†ìŒ (JSON ë˜ëŠ” ë¬¸ìì—´ë¡œ ì—ë®¬ë ˆì´ì…˜ë¨) | `$table->array('...')` (PG ì „ìš©) |
| **ì»¬ëŸ¼ ìˆœì„œ** | ì œì–´í•  ìˆ˜ ì—†ìŒ (`after()` ì‘ë™ ì•ˆí•¨) | ì œì–´í•  ìˆ˜ ìˆìŒ (`after()`) | Laravelì´ ì´ë¥¼ ì¶”ìƒí™”í•˜ì§€ë§Œ, ì œì•½ì„ ì•Œì•„ì•¼ í•©ë‹ˆë‹¤. |


**ì¸ë±ìŠ¤ ìƒì„± ì˜ˆì‹œ:**
```php
// ë§ˆì´ê·¸ë ˆì´ì…˜ì—ì„œ
$table->index('solar_system');
```

---

#### **7. psqlì—ì„œ ë°ì´í„° í™•ì¸**

ì•„ë¬´ ê·¸ë˜í”½ í´ë¼ì´ì–¸íŠ¸ë¥¼ ì‚¬ìš©í•˜ê³  ê±°ê¸°ì„œ space_apië¥¼ ì„ íƒí•˜ì—¬ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ì½˜ì†” ì‚¬ìš© ì‹œ:
```bash
psql -U postgres -d space_api
# í„°ë¯¸ë„ì´ PostgreSQL ì„¤ì¹˜ ì‹œ ì„¤ì •í•œ ë¹„ë°€ë²ˆí˜¸ë¥¼ ìš”ì²­í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
```
```sql
SELECT * FROM planets;
```

ì–´ë–¤ ê²½ìš°ë“  ì¶œë ¥ì€ ë‹¤ìŒê³¼ ê°™ì•„ì•¼ í•©ë‹ˆë‹¤:

 id |  name  | description | size_km |  solar_system   | image_url | is_habitable |
|---|---|---|---|---|---|---|
  1 | ì§€êµ¬  | ë‹¤ì–‘í•œ ìƒëª…ì²´ê°€ ìˆëŠ” í‘¸ë¥¸ í–‰ì„±   |   12742 | íƒœì–‘ê³„| ...       | true |
  2 | í™”ì„±   | ë¯¸ë˜ ì‹ë¯¼ì§€í™”ì˜ ëª©í‘œì¸ ë¶‰ì€ í–‰ì„±        |    6779 | íƒœì–‘ê³„| null      | false |


---

#### **í™•ì¸ì„ ìœ„í•œ í€´ì¦ˆ**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. ë§ˆì´ê·¸ë ˆì´ì…˜ ì‹¤í–‰ ëª…ë ¹ì–´:</p>
      <label><input type="radio" name="q1" value="a"> a) php artisan migrate:run</label>
      <label><input type="radio" name="q1" value="b"> b) php artisan migrate</label>
      <label><input type="radio" name="q1" value="c"> c) php artisan db:migrate</label>
    </div>
    <div class="question">
      <p>2. ë§ˆì§€ë§‰ ë§ˆì´ê·¸ë ˆì´ì…˜ì„ ë¡¤ë°±í•˜ë ¤ë©´?</p>
      <label><input type="radio" name="q2" value="a"> a) migrate:undo</label>
      <label><input type="radio" name="q2" value="b"> b) migrate:rollback</label>
      <label><input type="radio" name="q2" value="c"> c) migrate:reset</label>
    </div>
    <div class="question">
      <p>3. ì‹œë”ëŠ” ë¬´ì—‡ì— ì‚¬ìš©ë©ë‹ˆê¹Œ?</p>
      <label><input type="radio" name="q3" value="a"> a) í…Œì´ë¸” ì‚­ì œ</label>
      <label><input type="radio" name="q3" value="b"> b) DBì— í…ŒìŠ¤íŠ¸ ë°ì´í„° ì±„ìš°ê¸°</label>
      <label><input type="radio" name="q3" value="c"> c) ëª¨ë¸ ìƒì„±</label>
    </div>
    <div class="question">
      <p>4. ê¸°ì¡´ í…Œì´ë¸”ì— ì»¬ëŸ¼ì„ ì¶”ê°€í•˜ëŠ” ë©”ì„œë“œëŠ”?</p>
      <label><input type="radio" name="q4" value="a"> a) Schema::addColumn()</label>
      <label><input type="radio" name="q4" value="b"> b) Schema::table()</label>
      <label><input type="radio" name="q4" value="c"> c) Schema::modify()</label>
    </div>
    <div class="question">
      <p>5. ì‹œë”ëŠ” ì–´ë””ì— ë“±ë¡ë©ë‹ˆê¹Œ?</p>
      <label><input type="radio" name="q5" value="a"> a) DatabaseSeeder.php</label>
      <label><input type="radio" name="q5" value="b"> b) .env</label>
      <label><input type="radio" name="q5" value="c"> c) config/database.php</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">í™•ì¸</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'b', q4: 'b', q5: 'a' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>ê²°ê³¼:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;
if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>ì§ˆë¬¸ ${question.slice(1)}: <span style="color:green;">ì •ë‹µì…ë‹ˆë‹¤!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>ì§ˆë¬¸ ${question.slice(1)}: <span style="color:red;">ì˜¤ë‹µì…ë‹ˆë‹¤.</span> ì •ë‹µ: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>ì§ˆë¬¸ ${question.slice(1)}: <span style="color:orange;">ë‹µë³€ ì—†ìŒ.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>ê·€í•˜ì˜ ì ìˆ˜: ${score} / ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>


---

**ğŸš€ ì¥ ìš”ì•½:**

ë‹¤ìŒê³¼ ê°™ì´ "ìš°ì£¼ ì¸í”„ë¼ êµ¬ì¶•"ì„ ë§ˆìŠ¤í„°í–ˆìŠµë‹ˆë‹¤:

- âœ… ë§ˆì´ê·¸ë ˆì´ì…˜ ìƒì„± ë° ì‹¤í–‰
- ğŸ”§ í…Œì´ë¸” êµ¬ì¡° í˜„ëŒ€í™”
- ğŸŒ ì²« ë²ˆì§¸ í–‰ì„±ìœ¼ë¡œ DB ì±„ìš°ê¸°
- âš™ï¸ PostgreSQL ì‘ì—… ë°©ë²• í•™ìŠµ

**ë‹¹ì‹ ì˜ ìš°ì£¼ê°€ ì²« ë²ˆì§¸ ì„¸ê³„ë¥¼ ì–»ì—ˆìŠµë‹ˆë‹¤!** ì´ì œ í–‰ì„± ê´€ë¦¬ë¥¼ ìœ„í•œ API ì¸í„°í˜ì´ìŠ¤ ìƒì„±ì„ ì§„í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

> **ğŸ“Œ í™•ì¸:**

> 1. `php artisan tinker` ì‹¤í–‰
> 2. `App\Models\Planet::all()` ì‹¤í–‰
> 3. ì§€êµ¬ì™€ í™”ì„±ì´ ë³´ì´ëŠ”ì§€ í™•ì¸í•˜ì‹­ì‹œì˜¤.
