# **μ 3.2μ¥: μ²« API μ—”λ“ν¬μΈνΈ μƒμ„±**
**ν•™μµ μ‹κ°„:** 30λ¶„

---

#### **1. μ—”λ“ν¬μΈνΈ: λ°μ΄ν„° λ„ν‚Ή ν¬νΈ**
μ°λ¦¬ APIκ°€ μ°μ£Ό μ •κ±°μ¥μ΄λΌκ³  μƒμƒν•΄ λ³΄μ„Έμ”. **μ—”λ“ν¬μΈνΈ**(μΆ…μ )λ” νΉμ • μ ν•μ μ°μ£Όμ„ μ„ μ„ν•΄ μ„¤κ³„λ νΉμ • **λ„ν‚Ή ν¬νΈ**μ…λ‹λ‹¤.

- ν¬νΈ `β„–1` β€” ν™”λ¬Όμ„ μ© (ν–‰μ„± λ°μ΄ν„°).
- ν¬νΈ `β„–2` β€” νƒμ‚¬μ„ μ© (μ„λ¬΄ λ°μ΄ν„°).
- ν¬νΈ `β„–3` β€” μ—¬κ° μ…”ν‹€μ© (μ°μ£Ό λΉ„ν–‰μ‚¬ λ°μ΄ν„°).

κ° μ—”λ“ν¬μΈνΈλ” νΉμ • λ¦¬μ†μ¤μ— λ€ν• νΉμ • μ‘μ—…μ„ λ‹΄λ‹Ήν•λ” κ³ μ ν• URLμ…λ‹λ‹¤.

> π’΅ **μ°μ£Ό λΉ„μ :**
> `GET /spaceships` β€” μ΄λ” "μ§€μƒ κ΄€μ  μ„Όν„° β†’ μ •κ±°μ¥: λ¨λ“  λ„ν‚Ήλ μ°μ£Όμ„  λ©λ΅μ„ λ³΄κ³ ν•μ‹­μ‹μ¤"λΌλ” λ…λ Ήμ–΄μ…λ‹λ‹¤. μ΄ μ—”λ“ν¬μΈνΈλ” λ¦¬μ†μ¤ μ»¬λ ‰μ…μ„ λ°ν™ν•©λ‹λ‹¤.

---

#### **2. "μ°μ£Ό ν•¨λ€" μƒμ„±**
μ•„μ§ λ°μ΄ν„°λ² μ΄μ¤κ°€ μ—†μΌλ―€λ΅ Python λ”•μ…”λ„λ¦¬ ν•νƒμ κ°„λ‹¨ν• μ°μ£Όμ„  λ©λ΅μΌλ΅ "μ‹λ®¬λ μ΄μ…"μ„ λ§λ“¤κ² μµλ‹λ‹¤.

**`main.py`λ¥Ό μ—΄κ³  `app` μ •μ μ•μ— λ‹¤μ μ½”λ“λ¥Ό μ¶”κ°€ν•μ„Έμ”:**
```python
# main.py

# λ‹¨κ³„ 1: λ°μ΄ν„°λ² μ΄μ¤ μ‹λ®¬λ μ΄μ… μƒμ„±
db_spaceships = {
    1: {
        "name": "Voyager-1",
        "type": "νƒμ‚¬μ„ ",
        "launch_year": 1977,
        "status": "ν™μ„±"
    },
    2: {
        "name": "Hubble Space Telescope",
        "type": "λ§μ›κ²½",
        "launch_year": 1990,
        "status": "ν™μ„±"
    },
    3: {
        "name": "ISS",
        "type": "μ •κ±°μ¥",
        "launch_year": 1998,
        "status": "κ¶¤λ„"
    }
}

# ... μ—¬κΈ°μ— app = FastAPI() μ½”λ“ ...
```
μ΄κ²ƒμ΄ μ°λ¦¬κ°€ μ‘μ—…ν•  "μ°μ£Όμ„  λ“±λ΅λ¶€"μ…λ‹λ‹¤.

---

#### **3. μ²« λ²μ§Έ μ—”λ“ν¬μΈνΈ: μ°μ£Όμ„  λ©λ΅**
μ΄μ  μ°λ¦¬ ν•¨λ€ μ „μ²΄λ¥Ό λ°ν™ν•λ” μ—”λ“ν¬μΈνΈλ¥Ό λ§λ“¤κ² μµλ‹λ‹¤.

**`main.py`μ `@app.get("/")` λ‹¤μμ— λ‹¤μ μ½”λ“λ¥Ό μ¶”κ°€ν•μ„Έμ”:**
```python
# main.py

# ... db_spaceships, FastAPI, app λ° read_root() μ½”λ“ ...

@app.get("/spaceships")
def get_spaceships():
    """
    λ“±λ΅λ λ¨λ“  μ°μ£Όμ„  λ©λ΅μ„ λ°ν™ν•©λ‹λ‹¤.
    """
    return db_spaceships
```

- `@app.get("/spaceships")`: μƒ κ²½λ΅λ¥Ό μƒμ„±ν–μµλ‹λ‹¤. μ΄μ  `/spaceships` URLμ— λ€ν• `GET` μ”μ²­μ€ `get_spaceships` ν•¨μμ— μν•΄ μ²λ¦¬λ©λ‹λ‹¤.
- `return db_spaceships`: FastAPIλ” Python λ”•μ…”λ„λ¦¬λ¥Ό μ ν¨ν• JSON μ‘λ‹µμΌλ΅ μλ™ λ³€ν™ν•©λ‹λ‹¤.

---

#### **4. μƒ λ„ν‚Ή ν¬νΈ μ‘λ™ ν™•μΈ**
λ§μ•½ `uvicorn` μ„λ²„κ°€ `--reload` ν”λκ·Έμ™€ ν•¨κ» μ—¬μ „ν μ‹¤ν–‰ μ¤‘μ΄λΌλ©΄, μ΄λ―Έ μ¬λ΅λ“λμ–΄ μ‘λ™ μ¤€λΉ„κ°€ μ™„λ£λμ—μµλ‹λ‹¤. κ·Έλ ‡μ§€ μ•λ‹¤λ©΄ λ‹¤μ‹ μ‹μ‘ν•μ‹­μ‹μ¤:
```bash
uvicorn main:app --reload
```

**λ‹¨κ³„ 1: λΈλΌμ°μ €μ—μ„ ν™•μΈ**

λΈλΌμ°μ €μ—μ„ `http://127.0.0.1:8000/spaceships` μ£Όμ†λ¥Ό μ—½λ‹λ‹¤.
JSON ν•μ‹μΌλ΅ μ°μ£Όμ„  μ „μ²΄ λ©λ΅μ΄ ν‘μ‹λμ–΄μ•Ό ν•©λ‹λ‹¤:
```json
{
  "1": {
    "name": "Voyager-1",
    "type": "Π—ΠΎΠ½Π΄",
    "launch_year": 1977,
    "status": "ΠΠΊΡ‚ΠΈΠ²ΠµΠ½"
  },
  "2": {
    "name": "Hubble Space Telescope",
    "type": "ΠΆΠµΠ»ΠµΡΠΊΠΎΠΏ",
    "launch_year": 1990,
    "status": "ΠΠΊΡ‚ΠΈΠ²ΠµΠ½"
  },
  "3": {
    "name": "ISS",
    "type": "Π΅Ρ‚Π°Π½Ρ†ΠΈΡ",
    "launch_year": 1998,
    "status": "ΠΠ° ΠΎΡ€Π±ΠΈΡ‚Πµ"
  }
}
```

**λ‹¨κ³„ 2: μλ™ λ¬Έμ„μ—μ„ ν™•μΈ**

`http://127.0.0.1:8000/docs`λ΅ μ΄λ™ν•μ„Έμ”. λ¬Έμ„μ— `GET /spaceships` μ—”λ“ν¬μΈνΈμ— λ€ν• μƒ μ„Ήμ…μ΄ λ‚νƒ€λ‚ κ²ƒμ„ λ³Ό μ μμµλ‹λ‹¤. "Try it out"μ„ ν΄λ¦­ν•κ³  "Execute"λ¥Ό λλ¬ κ±°κΈ°μ„ λ°”λ΅ ν…μ¤νΈν•  μ μμµλ‹λ‹¤!

---

#### **5. λ§¤κ°λ³€μκ°€ μλ” μ—”λ“ν¬μΈνΈ: νΉμ • μ°μ£Όμ„  λ°μ΄ν„°**
"λ³΄μ΄μ €-1"μ— λ€ν• λ°μ΄ν„°λ§ ν•„μ”ν•λ‹¤λ©΄ μ–΄λ–¨κΉμ”? μ΄λ¥Ό μ„ν•΄ **κ²½λ΅ λ§¤κ°λ³€μ(path parameter)**λ¥Ό μ‚¬μ©ν•μ—¬ μ—”λ“ν¬μΈνΈλ¥Ό λ§λ“¤κ² μµλ‹λ‹¤.

**`main.py`μ— λ‹¤μ μ½”λ“λ¥Ό μ¶”κ°€ν•μ„Έμ”:**
```python
# main.py

# ... λ‚λ¨Έμ§€ μ½”λ“ ...

@app.get("/spaceships/{ship_id}")
def get_spaceship(ship_id: int):
    """
    IDλ¥Ό μ‚¬μ©ν•μ—¬ νΉμ • μ°μ£Όμ„ μ— λ€ν• λ°μ΄ν„°λ¥Ό λ°ν™ν•©λ‹λ‹¤.
    """
    return db_spaceships.get(ship_id)
```

- `"/spaceships/{ship_id}"`: μ¤‘κ΄„νΈ `{}`λ” `ship_id`κ°€ URLμ—μ„ μ „λ‹¬λ  λ³€μμ„μ„ FastAPIμ— μ•λ ¤μ¤λ‹λ‹¤.
- `ship_id: int`: μ΄κ²ƒμ€ **νƒ€μ… ννΈ(type hint)**μ…λ‹λ‹¤. FastAPIλ” μ „λ‹¬λ IDκ°€ μ •μμΈμ§€ μλ™μΌλ΅ ν™•μΈν•©λ‹λ‹¤. λ§μ•½ λ„κµ°κ°€ `/spaceships/voyager`λ¥Ό μ”μ²­ν•λ©΄, FastAPIλ” μ ν¨μ„± κ²€μ‚¬ μ¤λ¥ `422 Unprocessable Entity`λ¥Ό λ°ν™ν•  κ²ƒμ…λ‹λ‹¤. μ΄κ²ƒμ€ λ§λ²•μ…λ‹λ‹¤!

**ν™•μΈ:**

`http://127.0.0.1:8000/spaceships/2`λ¥Ό μ—½λ‹λ‹¤. "ν—λΈ”" λ§μ›κ²½μ— λ€ν• λ°μ΄ν„°λ§ μ–»μ„ μ μμµλ‹λ‹¤. λ§μ•½ `http://127.0.0.1:8000/spaceships/99`λ¥Ό μ—΄λ©΄, ν•΄λ‹Ή μ°μ£Όμ„ μ΄ μ—†μΌλ―€λ΅ `null`μ„ λ°›κ² λ©λ‹λ‹¤.

---

#### **μ •λ¦¬ ν€΄μ¦**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. APIμ μ—”λ“ν¬μΈνΈλ”...</p>
      <label><input type="radio" name="q1" value="a"> a) μ°μ£Όμ μΆ…μ </label>
      <label><input type="radio" name="q1" value="b"> b) λ¦¬μ†μ¤μ— λ€ν• νΉμ • μ‘μ—…μ„ μ„ν• κ³ μ  URL</label>
      <label><input type="radio" name="q1" value="c"> c) λ°μ΄ν„°λ² μ΄μ¤ μ΄λ¦„</label>
    </div>
    <div class="question">
      <p>2. `@app.get("/users")` λ°μ½”λ μ΄ν„°λ” λ¬΄μ—‡μ„ ν•©λ‹κΉ?</p>
      <label><input type="radio" name="q2" value="a"> a) μƒ μ‚¬μ©μ μƒμ„±</label>
      <label><input type="radio" name="q2" value="b"> b) ν•¨μλ¥Ό `/users`μ— λ€ν• GET μ”μ²­κ³Ό μ—°κ²°</label>
      <input type="radio" name="q2" value="c"> c) λ¨λ“  λ°μ½”λ μ΄ν„° λ©λ΅ κ°€μ Έμ¤κΈ°</label>
    </div>
    <div class="question">
      <p>3. κ²½λ΅μ— `"/items/{item_id}"`λΌλ” ν‘μ‹λ” λ¬΄μ—‡μ„ μλ―Έν•©λ‹κΉ?</p>
      <label><input type="radio" name="q3" value="a"> a) `{item_id}`λΌλ” μ΄λ¦„μ ν΄λ”λ¥Ό μ°Ύμ•„μ•Ό ν•λ‹¤λ” κ²ƒ</label>
      <label><input type="radio" name="q3" value="b"> b) `item_id`κ°€ URLμ—μ„ κ°€μ Έμ¬ λ§¤κ°λ³€μλΌλ” κ²ƒ</label>
      <label><input type="radio" name="q3" value="c"> c) λ¬΄μ‹λ  μ£Όμ„</label>
    </div>
    <div class="question">
      <p>4. ν•¨μμ— `ship_id: int` νƒ€μ… ννΈκ°€ ν•„μ”ν• μ΄μ λ” λ¬΄μ—‡μ…λ‹κΉ?</p>
      <label><input type="radio" name="q4" value="a"> a) Pythonμ„ λ” λΉ λ¥΄κ² μ‹¤ν–‰ν•κΈ° μ„ν•΄</label>
      <label><input type="radio" name="q4" value="b"> b) FastAPIκ°€ IDκ°€ μ«μμΈμ§€ μλ™μΌλ΅ μ ν¨μ„± κ²€μ‚¬ν•λ„λ΅ ν•κΈ° μ„ν•΄</label>
      <label><input type="radio" name="q4" value="c"> c) λ³€μκ°€ ν•¨μ μ™Έλ¶€μ—μ„ λ³΄μ΄λ„λ΅ ν•κΈ° μ„ν•΄</label>
    </div>
    <div class="question">
      <p>5. `/spaceships/abc`λ¥Ό μ”μ²­ν–λ”λ° FastAPIκ°€ `int`λ¥Ό μμƒν•λ‹¤λ©΄ μ–΄λ–»κ² λ©λ‹κΉ?</p>
      <label><input type="radio" name="q5" value="a"> a) μ„λ²„κ°€ 500 μ¤λ¥μ™€ ν•¨κ» "λ‹¤μ΄"λ©λ‹λ‹¤.</label>
      <label><input type="radio" name="q5" value="b"> b) FastAPIκ°€ 422 μ¤λ¥λ¥Ό λ°ν™ν•©λ‹λ‹¤.</label>
      <label><input type="radio" name="q5" value="c"> c) FastAPIκ°€ "abc"λ¥Ό μ«μλ΅ λ³€ν™ν•λ ¤κ³  μ‹λ„ν•©λ‹λ‹¤.</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">ν™•μΈ</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'b', q4: 'b', q5: 'b' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>κ²°κ³Ό:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>λ¬Έμ  ${question.slice(1)}: <span style="color:green;">μ •λ‹µ!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>λ¬Έμ  ${question.slice(1)}: <span style="color:red;">μ¤λ‹µ.</span> μ •λ‹µ: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>λ¬Έμ  ${question.slice(1)}: <span style="color:orange;">μ‘λ‹µ μ—†μ.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>λ‹Ήμ‹ μ μ μ: ${score} / ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>


---

**π€ μ¥ μ”μ•½:**

API μ°μ£Ό μ •κ±°μ¥μ— λ‘ κ°μ "λ„ν‚Ή ν¬νΈ"λ¥Ό μ„±κ³µμ μΌλ΅ λ§λ“¤μ—μµλ‹λ‹¤:

- π›°οΈ λ¨λ“  μ°μ£Όμ„  λ©λ΅μ„ κ°€μ Έμ¤λ” ν¬νΈ (`/spaceships`)
- π”­ νΉμ • μ°μ£Όμ„ μ— λ€ν• λ°μ΄ν„°λ¥Ό κ°€μ Έμ¤λ” ν¬νΈ (`/spaceships/{ship_id}`)

λν• FastAPIμ μλ™ νƒ€μ… μ ν¨μ„± κ²€μ‚¬μ κ°•λ ¥ν•¨μ„ ν™•μΈν–μΌλ©°, μ΄λ” APIλ¥Ό μλ»λ μ”μ²­μΌλ΅λ¶€ν„° λ³΄νΈν•©λ‹λ‹¤.

**λ‚΄λΉ„κ²μ΄μ… μ‹μ¤ν…μ΄ μ„¤μ •λμ—μµλ‹λ‹¤!** λ‹¤μ μ¥μ—μ„λ” Pydanticμ„ μ‚¬μ©ν•μ—¬ μ°λ¦¬ μ°μ£Όμ„ μ "μ²­μ‚¬μ§„"μ„ λ§λ“¤μ–΄ APIλ¥Ό λ”μ± μ¤λ§νΈν•κ³  κ²¬κ³ ν•κ² λ§λ“¤ κ²ƒμ…λ‹λ‹¤.

> **π“ ν™•μΈ:**
> - `uvicorn` μ„λ²„κ°€ μ‹¤ν–‰ μ¤‘μ΄λ©° μ‘λ™ν•©λ‹λ‹¤.
> - URL `http://127.0.0.1:8000/spaceships`κ°€ μ°μ£Όμ„  λ©λ΅μ΄ ν¬ν•¨λ JSONμ„ λ°ν™ν•©λ‹λ‹¤.
> - URL `http://127.0.0.1:8000/spaceships/1`κ°€ "λ³΄μ΄μ €-1νΈ"μ— λ€ν• λ°μ΄ν„°λ¥Ό λ°ν™ν•©λ‹λ‹¤.
> - URL `http://127.0.0.1:8000/docs`κ°€ λ‘ κ°μ μƒλ΅μ΄ μ—”λ“ν¬μΈνΈλ¥Ό λ³΄μ—¬μ¤λ‹λ‹¤.

> **β οΈ μ¤λ¥κ°€ λ°μƒν•λ©΄:**

> - **404 Not Found:** λΈλΌμ°μ €μ™€ `@app.get(...)` λ°μ½”λ μ΄ν„°μ—μ„ URLμ΄ μ¬λ°”λ¥΄κ² μ…λ ¥λμ—λ”μ§€ ν™•μΈν•μ„Έμ”.
> - **μ½”λ“ μ¤λ¥:** κµ¬λ¬Έ, νΉν Pythonμ λ“¤μ—¬μ“°κΈ°μ™€ λ”•μ…”λ„λ¦¬μ μ‰Όν‘λ¥Ό μ£Όμ κΉκ² ν™•μΈν•μ„Έμ”.