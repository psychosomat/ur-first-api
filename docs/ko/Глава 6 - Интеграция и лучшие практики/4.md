# **ì œ6.4ì¥: API ë¬¸ì„œí™”**
**í•™ìŠµ ì‹œê°„:** 30ë¶„

---

#### **1. API ë¬¸ì„œí™”ê°€ ì™œ í•„ìš”í•œê°€ìš”?**
ë²„íŠ¼ì— ì•„ë¬´ëŸ° ì„¤ëª…ë„ ì—†ëŠ” ë³µì¡í•œ ìš°ì£¼ì„  ì œì–´íŒì„ ë°›ì•˜ë‹¤ê³  ìƒìƒí•´ ë³´ì„¸ìš”. ë¶ˆì„ ì¼œëŠ” ëŒ€ì‹  ë¹„ìƒ íƒˆì¶œ ì¥ì¹˜ë¥¼ ì‘ë™ì‹œí‚¬ ìœ„í—˜ì„ ê°ìˆ˜í•˜ë©° ë¬´ì‘ìœ„ë¡œ ë²„íŠ¼ì„ ëˆ„ë¥´ê²Œ ë  ê²ƒì…ë‹ˆë‹¤. API ë¬¸ì„œëŠ” ë°”ë¡œ ì´ëŸ¬í•œ ì„¤ëª…ê³¼ ì§€ì¹¨ì…ë‹ˆë‹¤.

**ì¢‹ì€ ë¬¸ì„œí™”ëŠ”:**

- **ì‹œê°„ì„ ì ˆì•½í•©ë‹ˆë‹¤:** ê°œë°œìê°€ ì–´ë–¤ ì—”ë“œí¬ì¸íŠ¸ê°€ ìˆê³ , ì–´ë–¤ ë§¤ê°œë³€ìˆ˜ë¥¼ ë°›ìœ¼ë©°, ë¬´ì—‡ì„ ë°˜í™˜í•˜ëŠ”ì§€ ì¶”ì¸¡í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.
- **ì˜¤ë¥˜ë¥¼ ì¤„ì…ë‹ˆë‹¤:** ëª…í™•í•œ ë°ì´í„° í˜•ì‹ ë° ì˜¤ë¥˜ ì½”ë“œ ì„¤ëª…ì€ APIì˜ ì˜ëª»ëœ ì‚¬ìš©ì„ ë°©ì§€í•˜ëŠ” ë° ë„ì›€ì´ ë©ë‹ˆë‹¤.
- **í†µí•©ì„ ê°„ì†Œí™”í•©ë‹ˆë‹¤:** í”„ë¡ íŠ¸ì—”ë“œ íŒ€ì€ ë¬¸ì„œë¥¼ ê³„ì•½ì„œì²˜ëŸ¼ í™œìš©í•˜ì—¬ ë°±ì—”ë“œ íŒ€ê³¼ ë³‘ë ¬ë¡œ ì‘ì—…í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- **ë‹¹ì‹ ì˜ ìœ ì‚°ì…ë‹ˆë‹¤:** 6ê°œì›” í›„ì— í”„ë¡œì íŠ¸ë¡œ ëŒì•„ì™”ì„ ë•Œ ìŠ¤ìŠ¤ë¡œì—ê²Œ ê³ ë§™ë‹¤ê³  ë§í•˜ê²Œ ë  ê²ƒì…ë‹ˆë‹¤.

> ğŸ’¡ **ìš°ì£¼ ë¹„ìœ :**

> - **API** = ë³µì¡í•œ ìš°ì£¼ ì •ê±°ì¥ ì œì–´ ì‹œìŠ¤í…œ.
> - **API ë¬¸ì„œí™”** = ìš°ì£¼ ë¹„í–‰ì‚¬ë¥¼ ìœ„í•œ ë§¤ë‰´ì–¼. ì—¬ê¸°ì—ëŠ” ë‹¤ìŒì´ ì„¤ëª…ë˜ì–´ ìˆìŠµë‹ˆë‹¤:
>   - ì—ì–´ë¡ì„ ì—´ê¸° ìœ„í•´ ì–´ë–¤ ëª…ë ¹(`ì—”ë“œí¬ì¸íŠ¸`)ì„ ë³´ë‚¼ì§€.
>   - ìƒëª… ìœ ì§€ ì‹œìŠ¤í…œì„ ì„¤ì •í•˜ê¸° ìœ„í•´ ì–´ë–¤ ë§¤ê°œë³€ìˆ˜(`ìš”ì²­ ë³¸ë¬¸`)ë¥¼ ì „ë‹¬í• ì§€.
>   - ì‘ë‹µìœ¼ë¡œ ì–´ë–¤ ì‹ í˜¸(`API ì‘ë‹µ`)ë¥¼ ê¸°ëŒ€í• ì§€.

---

#### **2. FastAPIì—ì„œì˜ ë¬¸ì„œí™”: ìë™ ë§ˆë²•**
FastAPIëŠ” ë¬¸ì„œí™”ë¥¼ ë†€ëë„ë¡ ê°„ë‹¨í•˜ê²Œ ë§Œë“­ë‹ˆë‹¤. FastAPIëŠ” **OpenAPI** ë° **Swagger UI** í‘œì¤€ì„ ì‚¬ìš©í•˜ì—¬ ì½”ë“œë¥¼ ê¸°ë°˜ìœ¼ë¡œ **ëŒ€í™”í˜• ë¬¸ì„œë¥¼ ìë™ìœ¼ë¡œ ìƒì„±í•©ë‹ˆë‹¤**.

**ë‹¨ê³„ 1: ì• í”Œë¦¬ì¼€ì´ì…˜ì— ë©”íƒ€ë°ì´í„° ì¶”ê°€**

`main.py` íŒŒì¼ì— ë¬¸ì„œì— í‘œì‹œë  ì„¤ëª…ì„ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```python
# main.py
from fastapi import FastAPI
from pydantic import BaseModel, Field

# ... (FastAPI ì½”ë“œ)

app = FastAPI(
    title="SpaceAPI",
    description="""
ì€í•˜ê³„ íƒì‚¬ë¥¼ ìœ„í•œ API. ğŸš€

ë‹¤ìŒê³¼ ê°™ì€ ì‘ì—…ì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:
* **í–‰ì„± ë³´ê¸°**.
* **ìƒˆë¡œìš´ í–‰ì„± ì¶”ê°€** (ì¸ì¦ í•„ìš”).
    """,
    version="1.0.0",
    contact={
        "name": "ê´€ì œ ì„¼í„° ìˆ˜ì„ ì—”ì§€ë‹ˆì–´",
        "url": "https://example.com/contact",
        "email": "engineer@example.com",
    },
)
```

**ë‹¨ê³„ 2: ëª¨ë¸ ë° ì—”ë“œí¬ì¸íŠ¸ ì„¤ëª…**

Pydantic ëª¨ë¸ê³¼ ì—”ë“œí¬ì¸íŠ¸ ë§¤ê°œë³€ìˆ˜ë¥¼ ìì„¸íˆ ì„¤ëª…í• ìˆ˜ë¡ ë¬¸ì„œê°€ ë” ì¢‹ì•„ì§‘ë‹ˆë‹¤.

```python
# Pydantic ëª¨ë¸ íŒŒì¼ ë˜ëŠ” main.pyì—ì„œ

class PlanetBase(BaseModel):
    name: str = Field(..., example="ì§€êµ¬", description="í–‰ì„± ì´ë¦„")
    description: str = Field(..., example="ë‹¤ì–‘í•œ ìƒëª…ì²´ê°€ ìˆëŠ” í‘¸ë¥¸ í–‰ì„±", description="ê°„ëµí•œ ì„¤ëª…")
    # ...

class Planet(PlanetBase):
    id: int
    is_habitable: bool

    class Config:
        orm_mode = True # ë˜ëŠ” Pydantic v2ì—ì„œëŠ” from_attributes = True

# ë¼ìš°íŠ¸ íŒŒì¼ì—ì„œ
@router.get(
    "/planets",
    response_model=list[Planet],
    summary="ëª¨ë“  í–‰ì„± ëª©ë¡ ê°€ì ¸ì˜¤ê¸°",
    description="(í–¥í›„) í˜ì´ì§€ë„¤ì´ì…˜ê³¼ í•¨ê»˜ ì•Œë ¤ì§„ ëª¨ë“  í–‰ì„± ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤."
)
def get_planets():
    # ...

@router.post(
    "/planets",
    # ...
    summary="ìƒˆ í–‰ì„± ìƒì„±",
    responses={
        401: {"description": "ì‚¬ìš©ì ì¸ì¦ë˜ì§€ ì•ŠìŒ"},
        422: {"description": "ë°ì´í„° ìœ íš¨ì„± ê²€ì‚¬ ì˜¤ë¥˜"}
    }
)
def create_planet(planet: PlanetCreate, ...):
    # ...
```

- `Field(..., example="...")`: ë¬¸ì„œì— ì˜ˆì‹œë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤.
- `summary`: ì—”ë“œí¬ì¸íŠ¸ì˜ ê°„ëµí•œ ì„¤ëª….
- `description`: ìì„¸í•œ ì„¤ëª….
- `responses`: ì„±ê³µì ì¸ ì‘ë‹µì„ ì œì™¸í•œ ê°€ëŠ¥í•œ ì‘ë‹µ ì½”ë“œ ì„¤ëª….

**ë‹¨ê³„ 3: ë¸Œë¼ìš°ì €ì—ì„œ ë¬¸ì„œ ì—´ê¸°**

FastAPI ì„œë²„ë¥¼ ì‹œì‘í•˜ê³  ë‘ ê°œì˜ ë§ˆë²• ê°™ì€ URLì„ ì—½ë‹ˆë‹¤:

1.  **`http://127.0.0.1:8000/docs`** â€” **Swagger UI** ëŒ€í™”í˜• ë¬¸ì„œë¥¼ ì—½ë‹ˆë‹¤. ì—¬ê¸°ì—ì„œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì½ì„ ìˆ˜ ìˆì„ ë¿ë§Œ ì•„ë‹ˆë¼ ë¸Œë¼ìš°ì €ì—ì„œ ì§ì ‘ **í…ŒìŠ¤íŠ¸**í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤!
2.  **`http://127.0.0.1:8000/redoc`** â€” **ReDoc**ì˜ ëŒ€ì²´ ë¬¸ì„œ ë³´ê¸°ë¥¼ ì—½ë‹ˆë‹¤. ì´ ë³´ê¸°ëŠ” ìƒí˜¸ ì‘ìš©ì„±ì´ ë–¨ì–´ì§€ì§€ë§Œ ì¢…ì¢… ë” ì½ê¸° ì‰½ìŠµë‹ˆë‹¤.

---

#### **3. Laravelì—ì„œì˜ ë¬¸ì„œí™”: ì„œë“œíŒŒí‹° íŒ¨í‚¤ì§€ ì‚¬ìš©**

FastAPIì™€ ë‹¬ë¦¬ Laravelì€ "ê¸°ë³¸ì ìœ¼ë¡œ" ë¬¸ì„œë¥¼ ìƒì„±í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ê·¸ëŸ¬ë‚˜ ì½”ë“œë¥¼ ë¶„ì„í•˜ì—¬ ì´ë¥¼ ìˆ˜í–‰í•˜ëŠ” í›Œë¥­í•œ íŒ¨í‚¤ì§€ë“¤ì´ ìˆìŠµë‹ˆë‹¤. ê°€ì¥ ì¸ê¸° ìˆëŠ” ê²ƒì€ **Scribe**ì…ë‹ˆë‹¤.

**ë‹¨ê³„ 1: Scribe ì„¤ì¹˜**
```bash
composer require --dev "knuckleswtf/scribe"
```
```bash
php artisan vendor:publish --tag=scribe-config
php artisan scribe:generate
```

**ë‹¨ê³„ 2: DocBlockì„ ì‚¬ìš©í•˜ì—¬ ì—”ë“œí¬ì¸íŠ¸ ì„¤ëª…**

ScribeëŠ” ì»¨íŠ¸ë¡¤ëŸ¬ ë©”ì„œë“œ ìœ„ì— ìˆëŠ” PHP DocBlock(ëŒ“ê¸€ í˜•ì‹: `/** ... */`)ì„ ì½ìŠµë‹ˆë‹¤.

`app/Http/Controllers/PlanetController.php`ë¥¼ ì—½ë‹ˆë‹¤:

```php
// app/Http/Controllers/PlanetController.php

/**
 * @group í–‰ì„±
 * í–‰ì„± ê´€ë¦¬ë¥¼ ìœ„í•œ API
 */
class PlanetController extends Controller
{
    /**
     * í–‰ì„± ëª©ë¡ ê°€ì ¸ì˜¤ê¸°
     *
     * ì€í•˜ê³„ì˜ ëª¨ë“  í–‰ì„±ì˜ í˜ì´ì§€ë„¤ì´ì…˜ëœ ëª©ë¡ì„ ë°˜í™˜í•©ë‹ˆë‹¤.
     *
     * @unauthenticated
     */
    public function index()
    {
        // ...
    }

    /**
     * ìƒˆ í–‰ì„± ìƒì„±
     *
     * @authenticated
     *
     * @bodyParam name string required í–‰ì„± ì´ë¦„. Example: Kepler-186f
     * @bodyParam description string required í–‰ì„± ì„¤ëª….
     * @bodyParam size_km integer required ì§ê²½ (í‚¬ë¡œë¯¸í„°). Example: 14000
     * @bodyParam is_habitable boolean í–‰ì„±ì´ ê±°ì£¼ ê°€ëŠ¥í•œì§€ ì—¬ë¶€. Example: true
     *
     * @response 201 {
     *  "id": 4,
     *  "name": "Kepler-186f",
     *  "description": "ë‹¤ë¥¸ ë³„ì˜ ê±°ì£¼ ê°€ëŠ¥ êµ¬ì—­ì—ì„œ í™•ì¸ëœ ìµœì´ˆì˜ ì§€êµ¬ í¬ê¸° í–‰ì„±ì…ë‹ˆë‹¤.",
     *  "size_km": 14000,
     *  "is_habitable": true,
     *  "created_at": "2023-10-27T12:00:00.000000Z",
     *  "updated_at": "2023-10-27T12:00:00.000000Z"
     * }
     */
    public function store(Request $request)
    {
        // ...
    }
    // ... ê¸°íƒ€ ë‹¤ë¥¸ ë©”ì„œë“œë„ ë§ˆì°¬ê°€ì§€
}
```

**Scribe ì£¼ìš” íƒœê·¸:**

- `@group`: ì—”ë“œí¬ì¸íŠ¸ë¥¼ ê·¸ë£¹í™”í•©ë‹ˆë‹¤.
- `@unauthenticated` / `@authenticated`: í† í°ì´ í•„ìš”í•œì§€ ì—¬ë¶€ë¥¼ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤.
- `@bodyParam`: ìš”ì²­ ë³¸ë¬¸ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„¤ëª…í•©ë‹ˆë‹¤.
- `@response`: ì„±ê³µì ì¸ ì‘ë‹µ ì˜ˆì‹œ.

**ë‹¨ê³„ 3: ë¬¸ì„œ ìƒì„± ë° ë³´ê¸°**

DocBlockì„ ë³€ê²½í•  ë•Œë§ˆë‹¤ ë‹¤ìŒ ëª…ë ¹ì„ ì‹¤í–‰í•©ë‹ˆë‹¤:

```bash
php artisan scribe:generate
```
ScribeëŠ” ë¬¸ì„œê°€ í¬í•¨ëœ ì •ì  HTML í˜ì´ì§€ë¥¼ ìƒì„±í•©ë‹ˆë‹¤. ë‹¤ìŒ ì£¼ì†Œë¡œ ì—½ë‹ˆë‹¤: **`http://your-app-url/docs`**.

---

#### **ì •ë¦¬ í€´ì¦ˆ**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. FastAPIëŠ” ë‹¤ìŒ í‘œì¤€ì„ ê¸°ë°˜ìœ¼ë¡œ ë¬¸ì„œë¥¼ ìƒì„±í•©ë‹ˆë‹¤:</p>
      <label><input type="radio" name="q1" value="a"> a) GraphQL</label>
      <label><input type="radio" name="q1" value="b"> b) OpenAPI (Swagger)</label>
      <label><input type="radio" name="q1" value="c"> c) WSDL</label>
    </div>
    <div class="question">
      <p>2. FastAPIì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ Swagger UIë¥¼ ì—¬ëŠ” URLì€ ë¬´ì—‡ì¸ê°€ìš”?</p>
      <label><input type="radio" name="q2" value="a"> a) /api/docs</label>
      <label><input type="radio" name="q2" value="b"> b) /swagger</label>
      <label><input type="radio" name="q2" value="c"> c) /docs</label>
    </div>
    <div class="question">
      <p>3. Laravelì—ì„œ ë¬¸ì„œ ìƒì„±ì„ ìœ„í•œ ì¸ê¸° ìˆëŠ” íŒ¨í‚¤ì§€ëŠ”:</p>
      <label><input type="radio" name="q3" value="a"> a) Telescope</label>
      <label><input type="radio" name="q3" value="b"> b) Scribe</label>
      <label><input type="radio" name="q3" value="c"> c) Horizon</label>
    </div>
    <div class="question">
      <p>4. Scribeì—ì„œ ìš”ì²­ ë³¸ë¬¸ì˜ ë§¤ê°œë³€ìˆ˜ë¥¼ ì„¤ëª…í•˜ëŠ” ë° ì‚¬ìš©ë˜ëŠ” íƒœê·¸ëŠ”:</p>
      <label><input type="radio" name="q4" value="a"> a) @param</label>
      <label><input type="radio" name="q4" value="b"> b) @bodyParam</label>
      <label><input type="radio" name="q4" value="c"> c) @request</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">í™•ì¸</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'c', q3: 'b', q4: 'b' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>ê²°ê³¼:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;
if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>ì§ˆë¬¸ ${question.slice(1)}: <span style="color:green;">ë§ìŒ!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>ì§ˆë¬¸ ${question.slice(1)}: <span style="color:red;">í‹€ë¦¼.</span> ì •ë‹µ: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>ì§ˆë¬¸ ${question.slice(1)}: <span style="color:orange;">ë‹µë³€ ì—†ìŒ.</span></li>`;
      }
    }
    resultsHTML += `</ul><p><b>ë‹¹ì‹ ì˜ ì ìˆ˜: ${score} / ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**ğŸš€ ì¥ ìš”ì•½:**

ë‹¹ì‹ ì€ "ë¸”ë™ë°•ìŠ¤"ì˜€ë˜ APIë¥¼ ì´í•´í•˜ê¸° ì‰½ê³  í¸ë¦¬í•œ ë„êµ¬ë¡œ ë°”ê¾¸ì–´ ì „ë¬¸ì ì¸ ë¬¸ì„œë¥¼ ìƒì„±í–ˆìŠµë‹ˆë‹¤.

- âœ… API ë¬¸ì„œí™”ì˜ ì¤‘ìš”ì„±ì„ ì´í•´í–ˆìŠµë‹ˆë‹¤.
- ğŸª„ FastAPIì—ì„œ ë¬¸ì„œ ìë™ ìƒì„± ì‚¬ìš©ë²•ì„ ìµí˜”ìŠµë‹ˆë‹¤.
- âš™ï¸ Laravelì—ì„œ APIë¥¼ ë¬¸ì„œí™”í•˜ê¸° ìœ„í•œ Scribe íŒ¨í‚¤ì§€ì˜ ê¸°ì´ˆë¥¼ ìµí˜”ìŠµë‹ˆë‹¤.
- ğŸ›°ï¸ ì¢‹ì€ ë¬¸ì„œí™”ê°€ ëª¨ë“  ê°œë°œìì—ê²Œ ìµœê³ ì˜ ì¡°ë ¥ìì„ì„ í™•ì‹ í–ˆìŠµë‹ˆë‹¤.

**ì´ì œ ë‹¹ì‹ ì˜ APIëŠ” ì‘ë™í•˜ê³  ë³´í˜¸ë  ë¿ë§Œ ì•„ë‹ˆë¼, ë‹¤ë¥¸ íŒ€ì›ë“¤ì´ ì‚¬ìš©í•˜ê¸°ì— ì™„ì „íˆ ì¤€ë¹„ë˜ì—ˆìŠµë‹ˆë‹¤.** ë§ˆì§€ë§‰ì´ì ê°€ì¥ ì¤‘ìš”í•œ ë‹¨ê³„ëŠ” ìµœì¢… ë³´ì•ˆ ê²€ì‚¬ì…ë‹ˆë‹¤.

> **ğŸ“Œ í™•ì¸:**

> - FastAPIì˜ ê²½ìš°: ë¸Œë¼ìš°ì €ì—ì„œ `/docs`ë¥¼ ì—´ê³  Swagger UI ì¸í„°í˜ì´ìŠ¤ì—ì„œ ì§ì ‘ í–‰ì„± ëª©ë¡ì— ëŒ€í•œ `GET` ìš”ì²­ì„ ì‹œë„í•´ ë³´ì„¸ìš”.
> - Laravelì˜ ê²½ìš°: `php artisan scribe:generate`ë¥¼ ì‹¤í–‰í•˜ê³  `/docs`ë¥¼ ì—¬ì„¸ìš”. ì—”ë“œí¬ì¸íŠ¸ê°€ ê·¸ë£¹í™”ë˜ì–´ ìˆê³ , `store` ë©”ì„œë“œì— íŒŒë¼ë¯¸í„° ì„¤ëª…ì´ ìˆëŠ”ì§€ í™•ì¸í•˜ì„¸ìš”.
