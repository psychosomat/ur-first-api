# **CapÃ­tulo 1.3: Formato JSON**
**Tiempo de estudio:** 35 minutos

---

#### **1. JSON: El lenguaje de la comunicaciÃ³n espacial**
Imagine que una sonda espacial y el Centro de Control de la MisiÃ³n (MCC) hablan diferentes idiomas. **JSON (JavaScript Object Notation)** es un *lenguaje de datos universal*, comprensible tanto para humanos como para mÃ¡quinas. Â¡Como el idioma internacional de los astronautas!

**Propiedades principales:**

- ðŸª¶ Ligero: transmisiÃ³n rÃ¡pida incluso con seÃ±al dÃ©bil
- ðŸ‘€ Legible por humanos: la estructura es visible a simple vista
- ðŸ”„ Universal: compatible con todos los lenguajes de programaciÃ³n

> ðŸ’¡ **AnalogÃ­a espacial:**

> JSON es como un telegrama digital con datos sobre las estrellas. En lugar de cÃ³digo Morse, estructuras claras `{clave: valor}`.

---

#### **2. AnatomÃ­a de un mensaje JSON**
JSON se compone de dos tipos de estructuras:

**A. Objetos (Naves espaciales)**
```json
{
  "name": "Voyager-1",
  "launch_year": 1977,
  "is_active": true,
  "position": [-19.1, 42.7, 0.3]
}
```

**B. Arrays (CÃºmulos estelares)**
```json
[
  {"name": "Sirius", "magnitude": -1.46},
  {"name": "Canopus", "magnitude": -0.74},
  {"name": "Arcturus", "magnitude": -0.05}
]
```

**âš¡ Reglas de sintaxis:**

- Claves entre comillas `" "`
- Valores: cadenas de texto, nÃºmeros, booleanos (`true`/`false`), `null`
- Datos separados por comas
- Llaves `{}` para objetos, corchetes `[]` para arrays

---

#### **3. JSON vs XML: Batalla de formatos**
| ParÃ¡metro       | JSON (SatÃ©lite moderno)          | XML (Telescopio antiguo)       |
|----------------|----------------------------------|--------------------------------|
| **Legibilidad** | Alta (acceso directo a campos)   | Baja (etiquetas `<planet>...</planet>`) |
| **TamaÃ±o**     | Compacto                         | Voluminoso (+30% al tamaÃ±o)    |
| **Procesamiento**  | RÃ¡pido                           | Lento                          |
| **Ejemplo**     | `{"planet": "Mars"}`             | `<planet>Mars</planet>`        |

> **ðŸ”­ Â¿Por quÃ© JSON ganÃ³ en el espacio?**

> Las APIs de la NASA, SpaceX y la ESA usan JSON, Â¡es ideal para la transmisiÃ³n de datos!

---

#### **4. Trabajo con JSON en cÃ³digo**
**Ejemplo Python (obtener datos de la Luna):**
```python
import requests
import json

# Usamos una API real, por ejemplo, para obtener datos del Sistema Solar
# Ð¾Ñ‚ The Solar System OpenData API
try:
    response = requests.get("https://api.le-systeme-solaire.net/rest/bodies/terre")
    response.raise_for_status() # Comprueba errores HTTP (4xx, 5xx)

    planet_data = response.json()

    print(f"Nombre: {planet_data['englishName']}")
    print(f"SatÃ©lites: {[moon['moon'] for moon in planet_data['moons']]}")

    # ConversiÃ³n de un diccionario Python a una cadena JSON para guardar
    planet_json_str = json.dumps(planet_data, indent=2, ensure_ascii=False) # ensure_ascii=False para cirÃ­lico
    print("\n--- JSON Formateado ---")
    print(planet_json_str)

except requests.exceptions.RequestException as e:
    print(f"Error de solicitud: {e}")
```

**Ejemplo JavaScript (procesamiento de datos del telescopio):**
```javascript
const Data = `{
  "id": "terre",
  "name": "La Terre",
  "englishName": "Earth",
  "isPlanet": true,
  "moons": [
    {
      "moon": "La Lune",
      "rel": "https://api.le-systeme-solaire.net/rest/bodies/lune"
    }
  ],
  "semimajorAxis": 149598023,
  "perihelion": 147095000,
  "aphelion": 152100000,
  "eccentricity": 0.0167,
  "inclination": 0,
  "mass": {
    "massValue": 5.97237,
    "massExponent": 24
  },
  "vol": {
    "volValue": 1.08321,
    "volExponent": 12
  },
  "density": 5.5136,
  "gravity": 9.8,
  "escape": 11190,
  "meanRadius": 6371.0084,
  "equaRadius": 6378.1366,
  "polarRadius": 6356.8,
  "flattening": 0.00335,
  "dimension": "",
  "sideralOrbit": 365.256,
  "sideralRotation": 23.9345,
  "aroundPlanet": null,
  "discoveredBy": "",
  "discoveryDate": "",
  "alternativeName": "",
  "axialTilt": 23.4393,
  "avgTemp": 288,
  "mainAnomaly": 358.617,
  "argPeriapsis": 85.901,
  "longAscNode": 18.272,
  "bodyType": "Planet"
}`;

const dataObj = JSON.parse(Data);
console.log(dataObj.target);
```

---

#### **5. ValidaciÃ³n JSON: ComprobaciÃ³n de la "seÃ±al"**
Antes de usar los datos, asegÃºrese de que el JSON:

1. Tenga la estructura correcta (Â¡verifique los corchetes/llaves!)

2. Contenga los campos esperados

3. No tenga errores de sintaxis

**Herramientas:**
- [JSONLint](https://jsonlint.com/) (como un detector de basura espacial para JSON)
- Analizadores sintÃ¡cticos de lenguaje integrados (lanzarÃ¡n un error si el formato es incorrecto)

> âš ï¸ **Ejemplo de error:**

> `{"planet": "Mars"` â†’ Â¡Falta la llave de cierre!

> SoluciÃ³n: Siempre use `json.loads()` en Python o `JSON.parse()` en JS para verificar.

---

#### **Cuestionario de repaso**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. JSON significa...</p>
      <label><input type="radio" name="q1" value="a"> a) Java Space Object Notation</label>
      <label><input type="radio" name="q1" value="b"> b) JavaScript Object Notation</label>
      <label><input type="radio" name="q1" value="c"> c) Jupiter's Satellite Orbital Network</label>
    </div>
    <div class="question">
      <p>2. Â¿CÃ³mo se denota un objeto en JSON:</p>
      <label><input type="radio" name="q2" value="a"> a) ()</label>
      <label><input type="radio" name="q2" value="b"> b) {}</label>
      <label><input type="radio" name="q2" value="c"> c) []</label>
    </div>
    <div class="question">
      <p>3. Â¿QuÃ© NO es un valor vÃ¡lido en JSON?</p>
      <label><input type="radio" name="q3" value="a"> a) "name": "Saturn"</label>
      <label><input type="radio" name="q3" value="b"> b) "radius_km": 58232</label>
      <label><input type="radio" name="q3" value="c"> c) "has_rings": undefined</label>
    </div>
    <div class="question">
      <p>4. Â¿Por quÃ© JSON es mejor que XML para las APIs espaciales?</p>
      <label><input type="radio" name="q4" value="a"> a) Menor tamaÃ±o y alta velocidad</label>
      <label><input type="radio" name="q4" value="b"> b) Compatibilidad con codificaciones extraterrestres</label>
      <label><input type="radio" name="q4" value="c"> c) Capacidad para almacenar video</label>
    </div>
    <div class="question">
      <p>5. Â¿CÃ³mo se convierte una cadena JSON en un objeto Python?</p>
      <label><input type="radio" name="q5" value="a"> a) json.parse()</label>
      <label><input type="radio" name="q5" value="b"> b) json.to_object()</label>
      <label><input type="radio" name="q5" value="c"> c) json.loads()</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">Verificar</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'c', q4: 'a', q5: 'c' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>Resultados:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Pregunta ${question.slice(1)}: <span style="color:green;">Â¡Correcto!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Pregunta ${question.slice(1)}: <span style="color:red;">Incorrecto.</span> Respuesta correcta: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Pregunta ${question.slice(1)}: <span style="color:orange;">Sin respuesta.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Tu puntuaciÃ³n: ${score} de ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**ðŸš€ Resumen del capÃ­tulo:**

JSON es el "esperanto espacial" del mundo de las APIs. Conociendo su estructura, podrÃ¡s:

- ðŸ“¡ Recibir datos de telescopios y sondas

- ðŸ”§ Convertir informaciÃ³n entre sistemas

- ðŸ›°ï¸ Guardar datos cientÃ­ficos en archivos

**Â¡PrepÃ¡rense para el acoplamiento!** En el prÃ³ximo capÃ­tulo, exploraremos la arquitectura REST API, el sistema de control de la "estaciÃ³n espacial" de tu servidor.

> **ðŸ“Œ PrÃ¡ctica:** Â¡Visite [NASA Open APIs](https://api.nasa.gov/), encuentre la API de asteroides (Asteroids NeoWs) y estudie la estructura JSON en la respuesta!
