# **Cap√≠tulo 1.2: M√©todos HTTP e C√≥digos de Status**
**Tempo de estudo:** 40 minutos

---

#### **1. HTTP: A Linguagem de Comunica√ß√£o no Espa√ßo**
Imagine que voc√™ √© o **Centro de Controle da Miss√£o (MCC)** e o servidor da API √© uma **nave espacial**. HTTP (HyperText Transfer Protocol) √© a **comunica√ß√£o por r√°dio** entre voc√™s.

Cada mensagem cont√©m:

- **M√©todo** ‚Üí O que fazer (por exemplo, "enviar uma sonda")

- **C√≥digo de Status** ‚Üí O resultado da opera√ß√£o ("sonda lan√ßada com sucesso!")

> üí° **Analogia Espacial:**
> `GET /stars` = "MCC ‚Üí Nave: D√™-me as coordenadas das estrelas!"
> `200 OK` = "Nave ‚Üí MCC: Coordenadas transmitidas!"

---

#### **2. M√©todos HTTP Principais**
Cada m√©todo √© como um tipo de comando para uma miss√£o espacial:

| M√©todo    | An√°logo no Espa√ßo                 | Exemplo de Solicita√ß√£o           | Descri√ß√£o                    |
|-----------|-----------------------------------|----------------------------------|------------------------------|
| **GET**   | Solicita√ß√£o de dados (telesc√≥pio) | `GET /planets`                   | Obter uma lista de planetas  |
| **POST**  | Envio de um novo objeto (lan√ßamento de foguete) | `POST /satellites`               | Criar um novo sat√©lite       |
| **PUT**   | Atualiza√ß√£o completa de um objeto (corre√ß√£o de √≥rbita) | `PUT /satellites/iss`            | Atualizar dados da ISS       |
| **DELETE**| Destrui√ß√£o de um objeto (sa√≠da de √≥rbita) | `DELETE /debris/123`             | Excluir lixo espacial        |

**‚ö° Exemplo de C√≥digo (Python):**
```python
import requests

# GET: Obter dados do foguete Falcon 9
# Usamos um endpoint real da API SpaceX
response = requests.get("https://api.spacexdata.com/v4/rockets/5e9d0d95eda69973a809d1ec")
print(response.status_code, response.json()['name']) # 200 Falcon 9

# POST: Criar uma nova postagem em uma API de teste
# Usamos o servi√ßo sandbox jsonplaceholder
new_post = {"title": "Artemis Mission", "body": "Ready for launch", "userId": 1}
response = requests.post("https://jsonplaceholder.typicode.com/posts", json=new_post)
print(response.status_code, response.json()['id'])  # 201 101 (ou outro ID)
```

---

#### **3. C√≥digos de Status Importantes**
A resposta do servidor √© como um sinal da nave espacial:

| Grupo | C√≥digo | An√°logo no Espa√ßo                     | Descri√ß√£o                    |
|-------|--------|---------------------------------------|------------------------------|
| `2xx` | 200    | ‚úÖ "Tarefa conclu√≠da!"                 | Sucesso                      |
|       | 201    | üöÄ "Foguete lan√ßado!"                 | Objeto criado                |
| `3xx` | 301    | üåç "MCC movido para um novo endere√ßo" | Redirecionamento             |
| `4xx` | 400    | ‚ùå "Coordenadas incorretas na solicita√ß√£o!" | Erro do cliente              |
|       | 404    | ü™ê "Planeta n√£o encontrado!"          | Recurso n√£o existe           |
| `5xx` | 500    | üî• "Falha no sistema de propuls√£o!"  | Erro do servidor             |

---

#### **4. Pr√°tica: Tratamento de C√≥digos de Status**
Sempre verifique a resposta da API! Exemplo de tratamento de erros:
```python
import requests

def get_post_data(post_id):
    """Fun√ß√£o para obter dados de postagem com tratamento de c√≥digos de status."""
    try:
        response = requests.get(f"https://jsonplaceholder.typicode.com/posts/{post_id}")

        # Verifica o c√≥digo de status da resposta
        if response.status_code == 200:
            print(f"‚úÖ Dados para a postagem {post_id} recebidos com sucesso!")
            return response.json()
        elif response.status_code == 404:
            print(f"‚ö†Ô∏è Recurso para a postagem {post_id} n√£o encontrado!")
            return None
        else:
            # Tratamento de outros erros do cliente (4xx) ou do servidor (5xx)
            print(f"üö® Ocorreu um erro! C√≥digo de status: {response.status_code}")
            return None

    except requests.exceptions.RequestException as e:
        # Tratamento de erros de conex√£o (por exemplo, sem internet)
        print(f"üî• Erro de conex√£o: {e}")
        return None

# --- Testamos nossa fun√ß√£o ---
print("--- Buscando postagem existente ---")
get_post_data(1)

print("\n--- Buscando postagem inexistente ---")
get_post_data(9999) # Esta postagem n√£o existe, esperamos 404
```

> **üî≠ Exemplo de uma API real (SpaceX):**
> Solicita√ß√£o: `GET https://api.spacexdata.com/v4/ships/OCISLY`
> Resposta: `200 OK` + dados da nave
> Solicita√ß√£o: `GET https://api.spacexdata.com/v4/ships/UNICORN`
> Resposta: `404 Not Found`

---

#### **Quiz para fixa√ß√£o**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. Qual m√©todo usar para obter dados sobre as estrelas?</p>
      <label><input type="radio" name="q1" value="a"> a) POST</label>
      <label><input type="radio" name="q1" value="b"> b) PUT</label>
      <label><input type="radio" name="q1" value="c"> c) GET</label>
    </div>
    <div class="question">
      <p>2. O status `201 Created` significa:</p>
      <label><input type="radio" name="q2" value="a"> a) Objeto exclu√≠do</label>
      <label><input type="radio" name="q2" value="b"> b) Objeto criado</label>
      <label><input type="radio" name="q2" value="c"> c) Erro do servidor</label>
    </div>
    <div class="question">
      <p>3. M√©todo para atualiza√ß√£o completa dos dados do sat√©lite:</p>
      <label><input type="radio" name="q4" value="a"> a) PATCH</label>
      <label><input type="radio" name="q4" value="b"> b) DELETE</label>
      <label><input type="radio" name="q4" value="c"> c) PUT</label>
    </div>
    <div class="question">
      <p>4. O que significa o status `500 Internal Server Error`?</p>
      <label><input type="radio" name="q5" value="a"> a) Erro na solicita√ß√£o do cliente</label>
      <label><input type="radio" name="q5" value="b"> b) Falha no servidor</label>
      <label><input type="radio" name="q5" value="c"> c) Execu√ß√£o bem-sucedida</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">Verificar</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'c', q2: 'b', q4: 'c', q5: 'b' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>Resultados:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Quest√£o ${question.slice(1)}: <span style="color:green;">Correto!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Quest√£o ${question.slice(1)}: <span style="color:red;">Incorreto.</span> Resposta correta: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Quest√£o ${question.slice(1)}: <span style="color:orange;">Sem resposta.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Seu resultado: ${score} de ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**üöÄ Resumo do Cap√≠tulo:**
M√©todos HTTP s√£o seus comandos para miss√µes espaciais, e c√≥digos de status s√£o os relat√≥rios de sua execu√ß√£o. Lembre-se:
> `GET` = "D√™-me dados", `POST` = "Crie algo novo", `PUT` = "Atualize tudo", `DELETE` = "Destrua"
> `2xx` = Sucesso, `4xx` = Seu erro, `5xx` = Problema no servidor

**Prepare-se para o lan√ßamento!** No pr√≥ximo cap√≠tulo, decifraremos as "telecomunica√ß√µes" do servidor ‚Äì o formato JSON.

> **üìå Pr√°tica:** Use a [SpaceX API](https://docs.spacexdata.com/) para enviar um `GET /launches/latest` e estudar os c√≥digos de resposta!