# **ç¬¬5.1ç« ï¼šLaravel ä¸­çš„ Blade æ¨¡æ¿**
**å­¦ä¹ æ—¶é—´ï¼š** 40åˆ†é’Ÿ

---

### **1. ä»€ä¹ˆæ˜¯ Bladeï¼Ÿæ‚¨çš„â€œæ™ºèƒ½â€è“å›¾**

åˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬å·²ç»æ¥è§¦è¿‡ä¸¤ç§æç«¯æƒ…å†µï¼šçº¯ `index.html` å’Œæ¥è‡ª API çš„çº¯ JSON å“åº”ã€‚ä½†æ˜¯ï¼Œå¦‚ä½•åˆ›å»ºèƒ½å¤ŸåŠ¨æ€æ˜¾ç¤ºæˆ‘ä»¬åç«¯æ•°æ®çš„å®Œæ•´ç½‘é¡µå‘¢ï¼Ÿ

**Blade** æ˜¯ Laravel å†…ç½®çš„æ¨¡æ¿å¼•æ“ã€‚å®ƒå…è®¸æˆ‘ä»¬ç¼–å†™æ™®é€šçš„ HTMLï¼Œä½†å…·æœ‰â€œè¶…èƒ½åŠ›â€ï¼š

-   ä»¥ä¼˜é›…çš„è¯­æ³•æ’å…¥å˜é‡å¹¶æ‰§è¡Œ PHP ä»£ç ã€‚
-   åˆ›å»ºå¯é‡ç”¨çš„é¡µé¢â€œå¸ƒå±€â€ï¼ˆé¡µçœ‰ã€é¡µè„šï¼‰ã€‚
-   ç›´æ¥åœ¨ HTML ä»£ç ä¸­ä½¿ç”¨å¾ªç¯å’Œæ¡ä»¶è¯­å¥ã€‚
-   è‡ªåŠ¨é˜²èŒƒ XSS æ”»å‡»ã€‚

> ğŸ’¡ **å®‡å®™ç±»æ¯”ï¼š**

> æƒ³è±¡ä¸€ä¸‹ï¼ŒHTML æ˜¯å®‡å®™é£èˆ¹çš„ç®€å•è“å›¾ã€‚Blade æ˜¯ä¸€ä¸ªå…ˆè¿›çš„ CAD ç³»ç»Ÿã€‚æ‚¨ä¸ä»…ç»˜åˆ¶çº¿æ¡ï¼Œè¿˜æ·»åŠ â€œæ™ºèƒ½â€å¯¹è±¡ã€‚æ‚¨è¯´ï¼šâ€œè¿™é‡Œå°†æ˜¯èˆ¹å‘˜åˆ—è¡¨â€ï¼ŒBlade å°±ä¼šè‡ªåŠ¨è¯·æ±‚æ•°æ®å¹¶å¡«å……å®ƒã€‚â€œè¿™é‡Œå°†æ˜¯ä¸»å±å¹•â€ï¼ŒBlade å°±ä¼šæ’å…¥æ ‡å‡†ç•Œé¢ã€‚

æ‰€æœ‰ Blade æ–‡ä»¶éƒ½ä»¥ `.blade.php` æ‰©å±•åç»“å°¾ï¼Œå¹¶å­˜å‚¨åœ¨ `resources/views/` æ–‡ä»¶å¤¹ä¸­ã€‚

---

### **2. è¯­æ³•åŸºç¡€ï¼šæ•°æ®æ˜¾ç¤º**
Blade æœ€ç®€å•çš„åŠŸèƒ½å°±æ˜¯è¾“å‡ºæ•°æ®ã€‚

**`{{ }}` è¯­æ³•**

è¿™å¯¹åŒèŠ±æ‹¬å·æ˜¯ Blade çš„å‘½ä»¤ï¼šâ€œè·å–å˜é‡å¹¶å®‰å…¨åœ°è¾“å‡ºå…¶å†…å®¹â€ã€‚

**ç¤ºä¾‹ï¼š**

1.  **`routes/web.php` ä¸­çš„è·¯ç”±ï¼š**
    ```php
	<?php
    Route::get('/mission-briefing', function () {
        $mission = 'Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Kepler-186';
        return view('briefing', ['mission_name' => $mission]);
    });
    ```

    -   `view('briefing', ...)` å‘Šè¯‰ Laravel æŸ¥æ‰¾ `resources/views/briefing.blade.php` æ–‡ä»¶ã€‚
    -   `['mission_name' => $mission]` â€” è¿™æ˜¯æˆ‘ä»¬â€œä¼ é€’â€åˆ°è§†å›¾ä¸­çš„æ•°æ®æ•°ç»„ã€‚

2.  **`resources/views/briefing.blade.php` ä¸­çš„è§†å›¾ï¼š**
    ```html
    <h1>ĞœĞ¸ÑÑĞ¸Ñ Ğ¦Ğ£ĞŸ</h1>
    <p>Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°: {{ $mission_name }}</p>
    ```

**åœ¨æµè§ˆå™¨ä¸­è®¿é—® `/mission-briefing` çš„ç»“æœï¼š**
```html
<h1>ĞœĞ¸ÑÑĞ¸Ñ Ğ¦Ğ£ĞŸ</h1>
<p>Ğ¢ĞµĞºÑƒÑ‰Ğ°Ñ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ°: Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ÑŒ ÑĞ¸ÑÑ‚ĞµĞ¼Ñƒ Kepler-186</p>
```

> ğŸ›¡ï¸ **é‡è¦æç¤ºï¼š** Blade ä¼šè‡ªåŠ¨è½¬ä¹‰ `{{ }}` å†…çš„æ‰€æœ‰æ•°æ®ã€‚è¿™æ„å‘³ç€ï¼Œå¦‚æœå˜é‡åŒ…å« HTML æ ‡ç­¾æˆ–æ¶æ„è„šæœ¬ï¼Œå®ƒä»¬å°†ä½œä¸ºæ™®é€šæ–‡æœ¬è¾“å‡ºï¼Œè€Œä¸æ˜¯æ‰§è¡Œã€‚è¿™æ˜¯å†…ç½®çš„ XSS æ”»å‡»é˜²æŠ¤ã€‚

> *è¦è¾“å‡ºæœªè½¬ä¹‰çš„ HTMLï¼ˆè¯·è°¨æ…æ“ä½œï¼ï¼‰ï¼Œè¯·ä½¿ç”¨ `{!! $variable !!}` è¯­æ³•ã€‚*

---

### **3. æŒ‡ä»¤ï¼šåœ¨ HTML ä¸­æ·»åŠ é€»è¾‘**
Blade æŒ‡ä»¤ä»¥ `@` ç¬¦å·å¼€å¤´ã€‚å®ƒä»¬å…è®¸ä½¿ç”¨å¾ªç¯ã€æ¡ä»¶è¯­å¥ç­‰ã€‚

**æ¡ä»¶ (`@if`, `@else`)ï¼š**
```js
@if($planet->is_habitable)
    <p style="color: green;">è¡Œæ˜Ÿé€‚å®œå±…ä½ï¼</p>
@else
    <p style="color: red;">éœ€è¦å®‡èˆªæœã€‚å¤§æ°”å±‚å……æ»¡æ•Œæ„ã€‚</p>
@endif
```

**å¾ªç¯ (`@foreach`, `@forelse`)ï¼š**

`@forelse` æ˜¯ä¸€ä¸ªéå¸¸æ–¹ä¾¿çš„æŒ‡ä»¤ï¼Œå®ƒç»“åˆäº†å¾ªç¯å’Œç©ºæ£€æŸ¥ã€‚
```js
<h2>ç³»ç»Ÿä¸­çš„è¡Œæ˜Ÿåˆ—è¡¨ï¼š</h2>
<ul>
    @forelse($planets as $planet)
        <li>
            {{ $loop->iteration }}. {{ $planet->name }}
            <!-- $loop - å¾ªç¯ä¸­å¯ç”¨çš„ç‰¹æ®Šå˜é‡ -->
        </li>
    @empty
        <li>åœ¨è¯¥ç³»ç»Ÿä¸­æœªå‘ç°è¡Œæ˜Ÿã€‚</li>
    @endforelse
</ul>
```

---

### **4. å¸ƒå±€å’ŒåŒºåŸŸï¼šä¸è¦é‡å¤è‡ªå·± (DRY)**
Blade æœ€å¼ºå¤§çš„åŠŸèƒ½æ˜¯åˆ›å»ºå¯é‡ç”¨å¸ƒå±€ï¼ˆlayoutsï¼‰ã€‚æ‚¨æ— éœ€å°†ç½‘ç«™çš„é¡µçœ‰å’Œé¡µè„šå¤åˆ¶åˆ°æ¯ä¸ªé¡µé¢ã€‚

**ç¬¬ 1 æ­¥ï¼šåˆ›å»ºä¸»å¸ƒå±€ (`layout`)**

åˆ›å»º `resources/views/layouts/app.blade.php` æ–‡ä»¶ï¼š
```php
<?php
<!DOCTYPE html>
<html lang="en">
<head>
    <title>Ğ¦Ğ£ĞŸ - @yield('title')</title>
    <link rel="stylesheet" href="{{ asset('css/style.css') }}">
</head>
<body>
    <header>
        <h1>é“¶æ²³èˆ°é˜ŸæŒ‡æŒ¥ä¸­å¿ƒ</h1>
    </header>

    <main>
        @yield('content') <!-- è¿™é‡Œå°†æ˜¯é¡µé¢çš„ç‹¬ç‰¹å†…å®¹ -->
    </main>

    <footer>
        <p>&copy; {{ date('Y') }} Space Command. ç‰ˆæƒæ‰€æœ‰ã€‚</p>
    </footer>
</body>
</html>
```
-   `@yield('title')` å’Œ `@yield('content')` æ˜¯â€œæ’æ§½â€æˆ–â€œå ä½ç¬¦â€ã€‚

**ç¬¬ 2 æ­¥ï¼šåˆ›å»ºä½¿ç”¨å¸ƒå±€çš„å­è§†å›¾**

åˆ›å»º `resources/views/planets/index.blade.php` æ–‡ä»¶ï¼š
```php
<?php
@extends('layouts.app') {{-- ç»§æ‰¿æˆ‘ä»¬çš„ä¸»å¸ƒå±€ --}}

@section('title', 'Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ¿Ğ»Ğ°Ğ½ĞµÑ‚') {{-- å¡«å…… 'title' åŒºåŸŸ --}}

@section('content') {{-- å¡«å……ä¸»è¦çš„ 'content' åŒºåŸŸ --}}
    <h2>å·²æ³¨å†Œè¡Œæ˜Ÿ</h2>
    <p>è¿™æ˜¯æˆ‘ä»¬å·²çŸ¥çš„æ‰€æœ‰ä¸–ç•Œçš„åˆ—è¡¨ã€‚</p>
    {{-- è¿™é‡Œå¯ä»¥æ˜¯æ‚¨çš„ @forelse å¾ªç¯æ¥è¾“å‡ºè¡Œæ˜Ÿ --}}
@endsection
```

ç°åœ¨ï¼Œå½“ Laravel æ¸²æŸ“ `planets.index` æ—¶ï¼Œå®ƒä¼šé¦–å…ˆè·å– `layouts.app`ï¼Œç„¶åå°† `@section` åŒºåŸŸä¸­çš„å†…å®¹æ’å…¥åˆ°å…¶ä¸­ã€‚

---

### **å·©å›ºçŸ¥è¯†å°æµ‹éªŒ**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. Blade æ¨¡æ¿æ–‡ä»¶çš„æ‰©å±•åæ˜¯ä»€ä¹ˆï¼Ÿ</p>
      <label><input type="radio" name="q1" value="a"> a) .html</label>
      <label><input type="radio" name="q1" value="b"> b) .blade.php</label>
      <label><input type="radio" name="q1" value="c"> c) .php.blade</label>
    </div>
    <div class="question">
      <p>2. å¦‚ä½•åœ¨ Blade ä¸­å®‰å…¨åœ°è¾“å‡ºå˜é‡ `$name`ï¼Ÿ</p>
      <label><input type="radio" name="q2" value="a"> a) <?php echo $name; ?></label>
      <label><input type="radio" name="q2" value="b"> b) {{ $name }}</label>
      <label><input type="radio" name="q2" value="c"> c) [[$name]]</label>
    </div>
    <div class="question">
      <p>3. å“ªä¸ªæŒ‡ä»¤ç”¨äºç»§æ‰¿ä¸»å¸ƒå±€ï¼Ÿ</p>
      <label><input type="radio" name="q3" value="a"> a) @include('layouts.app')</label>
      <label><input type="radio" name="q3" value="b"> b) @layout('layouts.app')</label>
      <label><input type="radio" name="q3" value="c"> c) @extends('layouts.app')</label>
    </div>
    <div class="question">
      <p>4. `@yield('content')` æŒ‡ä»¤çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</p>
      <label><input type="radio" name="q4" value="a"> a) å®šä¹‰å ä½ç¬¦ï¼ˆç”¨äºæ’å…¥å†…å®¹çš„ä½ç½®ï¼‰</label>
      <label><input type="radio" name="q4" value="b"> b) æ’å…¥ `content.blade.php` æ–‡ä»¶çš„å†…å®¹</label>
      <label><input type="radio" name="q4" value="c"> c) ç»“æŸå†…å®¹åŒºåŸŸ</label>
    </div>
    <div class="question">
      <p>5. å“ªä¸ªæŒ‡ä»¤éå¸¸é€‚åˆå¯¹å¯èƒ½ä¸ºç©ºçš„æ•°ç»„è¿›è¡Œå¾ªç¯ï¼Ÿ</p>
      <label><input type="radio" name="q5" value="a"> a) @foreach</label>
      <label><input type="radio" name="q5" value="b"> b) @while</label>
      <label><input type="radio" name="q5" value="c"> c) @forelse</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">æ£€æŸ¥</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'c', q4: 'a', q5: 'c' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>ç»“æœï¼š</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:green;">æ­£ç¡®ï¼</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:red;">é”™è¯¯ã€‚</span> æ­£ç¡®ç­”æ¡ˆï¼š<b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:orange;">æœªå›ç­”ã€‚</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>æ‚¨çš„å¾—åˆ†ï¼š${score} / ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**ğŸš€ æœ¬ç« æ€»ç»“ï¼š**

æ‚¨å·²ç»å­¦ä¹ äº† Blade çš„åŸºç¡€çŸ¥è¯†â€”â€”ä¸€ä¸ªåˆ›å»ºåŠ¨æ€ç½‘é¡µçš„å¼ºå¤§å·¥å…·ã€‚ç°åœ¨æ‚¨èƒ½å¤Ÿï¼š

-   è¾“å‡ºæ•°æ®å¹¶è‡ªåŠ¨é˜²å¾¡ XSSã€‚
-   ä½¿ç”¨æŒ‡ä»¤æ·»åŠ é€»è¾‘ï¼ˆ`@if`, `@forelse`ï¼‰ã€‚
-   ä½¿ç”¨ `@extends` å’Œ `@yield` åˆ›å»ºå¯é‡ç”¨å¸ƒå±€ã€‚

**æˆ‘ä»¬å·²ç»ä¸ºé£èˆ¹çš„æ§åˆ¶é¢æ¿å‡†å¤‡å¥½äº†â€œè“å›¾â€ã€‚** åœ¨ä¸‹ä¸€ç« ä¸­ï¼Œæˆ‘ä»¬å°†ä¸ºæˆ‘ä»¬çš„ API åˆ›å»ºå…·ä½“çš„â€œé¢æ¿â€ï¼ˆè§†å›¾ï¼‰ï¼Œå¹¶åœ¨ä¸Šé¢æ˜¾ç¤ºçœŸå®æ•°æ®ã€‚