# **ç¬¬3.5ç« ï¼šSwagger è‡ªåŠ¨æ–‡æ¡£**
**å­¦ä¹ æ—¶é—´ï¼š** 30åˆ†é’Ÿ

---

#### **1. API æ–‡æ¡£ï¼šç©ºé—´ç«™æ“ä½œæ‰‹å†Œ**
æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æ˜¯ä¸€ååˆšæŠµè¾¾å›½é™…ç©ºé—´ç«™çš„æ–°å®‡èˆªå‘˜ã€‚ä½ å¦‚ä½•çŸ¥é“æ¯ä¸ªå¼€å…³çš„åŠŸèƒ½ä»¥åŠå¦‚ä½•æ“ä½œæœºæ¢°è‡‚ï¼Ÿä½ éœ€è¦ä¸€ä»½**è¯¦ç»†ä¸”æœ€æ–°çš„æ“ä½œæ‰‹å†Œ**ã€‚

**API æ–‡æ¡£**å¯¹å¼€å‘è€…æ¥è¯´å°±æ˜¯è¿™æ ·ä¸€ä»½æ‰‹å†Œã€‚å®ƒè§£é‡Šäº†ï¼š

- æœ‰å“ªäº›â€œå¯¹æ¥ç«¯å£â€ï¼ˆendpointsï¼‰å¯ç”¨ã€‚
- å¯ä»¥å‘é€å“ªäº›â€œå‘½ä»¤â€ï¼ˆHTTP æ–¹æ³•ï¼‰ã€‚
- éœ€è¦ä¼ è¾“å“ªäº›â€œè´§ç‰©â€ï¼ˆæ•°æ®ï¼‰ã€‚
- é¢„æœŸä¼šæ”¶åˆ°å“ªäº›â€œé¥æµ‹æ•°æ®â€ï¼ˆå“åº”ï¼‰ã€‚

é—®é¢˜åœ¨äºï¼Œæ‰‹åŠ¨ç¼–å†™æ–‡æ¡£è€—æ—¶ã€æ¯ç‡¥ï¼Œè€Œä¸”å‡ ä¹æ€»æ˜¯ä¼šè¿‡æ—¶ã€‚

> ğŸ’¡ **å¤ªç©ºç±»æ¯”ï¼š**

> æ‰‹åŠ¨æ–‡æ¡£å°±åƒçº¸è´¨å›¾çº¸ï¼Œå®ƒä»¬èººåœ¨æ¡£æ¡ˆå®¤é‡Œï¼Œç©ºé—´ç«™æ”¹é€ åä¹Ÿä¸ä¼šæ›´æ–°ã€‚
> **FastAPI è‡ªåŠ¨æ–‡æ¡£**æ˜¯**æŒ‡æŒ¥ä¸­å¿ƒï¼ˆĞ¦Ğ£ĞŸï¼‰çš„äº¤äº’å¼æ˜¾ç¤ºå±**ï¼Œåœ¨ç©ºé—´ç«™æ¯æ¬¡å˜æ›´åéƒ½ä¼šå®æ—¶æ›´æ–°ã€‚

---

#### **2. FastAPI çš„é­”åŠ›ï¼šå®ƒæ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ**
FastAPI åŸºäºä½ çš„ä»£ç ä¸ºä½ å®Œæˆäº†æ‰€æœ‰â€œè„æ´»ç´¯æ´»â€ã€‚å®ƒä¼šæ‰«æï¼š

1.  **è·¯ç”±ï¼š** æ‰€æœ‰ `@app.get`ã€`@app.post` ç­‰è£…é¥°å™¨ã€‚
2.  **å‚æ•°ï¼š** è·¯å¾„å‚æ•°ï¼ˆ`ship_id: int`ï¼‰å’ŒæŸ¥è¯¢å‚æ•°ã€‚
3.  **Pydantic æ¨¡å‹ï¼š** ä½ çš„â€œè“å›¾â€ï¼ˆ`Spaceship`ã€`SpaceshipCreate`ï¼‰ã€‚
4.  **æ–‡æ¡£å­—ç¬¦ä¸² (docstrings)ï¼š** ä½ ç”¨ä¸‰é‡å¼•å·ç¼–å†™çš„æè¿°ã€‚

åŸºäºè¿™äº›æ•°æ®ï¼ŒFastAPI ä¼šç”Ÿæˆç¬¦åˆ **OpenAPI** æ ‡å‡†ï¼ˆä»¥å‰ç§°ä¸º Swaggerï¼‰çš„æ¨¡å¼ï¼Œç„¶åé€šè¿‡ä¸¤ä¸ªç¾è§‚çš„ç•Œé¢å±•ç¤ºå®ƒã€‚

---

#### **3. æ¢ç´¢â€œæŒ‡æŒ¥ä¸­å¿ƒæ˜¾ç¤ºå±â€ï¼šSwagger UI**
**Swagger UI** æ˜¯ä¸€ä¸ªäº¤äº’å¼ç•Œé¢ï¼Œå®ƒä¸ä»…å…è®¸ä½ é˜…è¯»æ–‡æ¡£ï¼Œè¿˜å¯ä»¥**ç›´æ¥ä»æµè§ˆå™¨æµ‹è¯• API**ã€‚

**æ‰“å¼€ `http://127.0.0.1:8000/docs`**

ä½ ä¼šçœ‹åˆ°ï¼š

- **ç«¯ç‚¹åˆ—è¡¨ï¼š** æŒ‰æ ‡ç­¾åˆ†ç»„ï¼ˆé»˜è®¤æŒ‰èµ„æºåç§°ï¼‰ï¼Œå¹¶ç”¨ HTTP æ–¹æ³•çš„é¢œè‰²ç€è‰²ã€‚
- **æè¿°ï¼š** ä½ çš„æ–‡æ¡£å­—ç¬¦ä¸²ï¼ˆ`"""..."""`ï¼‰ä¸­çš„æ–‡æœ¬ä¼šæ˜¾ç¤ºä¸ºç«¯ç‚¹æè¿°ã€‚
- **å‚æ•°ï¼š** æ˜¾ç¤ºç«¯ç‚¹æœŸæœ›å“ªäº›å‚æ•°ï¼ˆå¦‚ `ship_id`ï¼‰ã€å®ƒä»¬çš„ç±»å‹å’Œæ˜¯å¦å¿…å¡«ã€‚
- **è¯·æ±‚ä½“ (Request Body)ï¼š** å¯¹äº `POST` å’Œ `PUT` è¯·æ±‚ï¼Œæ˜¾ç¤ºä»ä½ çš„ Pydantic æ¨¡å‹ï¼ˆ`SpaceshipCreate`ï¼‰ç”Ÿæˆçš„ JSON æ¨¡å¼ã€‚
- **å“åº” (Responses)ï¼š** æ˜¾ç¤ºå¯èƒ½çš„çŠ¶â€‹â€‹æ€ç å’ŒåŸºäº `response_model` çš„å“åº”æ¨¡å¼ã€‚
- **â€œTry it outâ€æŒ‰é’®ï¼š** å…è®¸ä½ å¡«å†™å‚æ•°å¹¶å‘ä½ çš„æœåŠ¡å™¨å‘é€å®é™…è¯·æ±‚ã€‚

---

#### **4. æ”¹è¿›æ–‡æ¡£ï¼šæ ‡ç­¾å’Œæè¿°**
è®©æˆ‘ä»¬è®©æ–‡æ¡£çœ‹èµ·æ¥æ›´ä¸“ä¸šã€‚

**æ­¥éª¤ 1ï¼šåœ¨ `FastAPI` ä¸­æ·»åŠ å…ƒæ•°æ®**
åœ¨åˆ›å»º `app` æ—¶ï¼Œä½ å¯ä»¥ä¼ é€’å…³äº API çš„ä¸€èˆ¬ä¿¡æ¯ã€‚

**ä¿®æ”¹ `main.py` ä¸­çš„ `app = FastAPI()` è¡Œï¼š**
```python
# main.py

app = FastAPI(
    title="Fleet Management API",
    description="API ç”¨äºç®¡ç†èˆªå¤©å™¨èˆ°é˜Ÿã€‚",
    version="1.0.0",
)
```
ç°åœ¨ï¼Œä½ çš„æ–‡æ¡£é¡¶éƒ¨å°†æ˜¾ç¤ºæ ‡é¢˜å’Œæè¿°ã€‚

**æ­¥éª¤ 2ï¼šä½¿ç”¨æ ‡ç­¾å¯¹ç«¯ç‚¹è¿›è¡Œåˆ†ç»„**
ä½ å¯ä»¥ä¸ºæ¯ä¸ªç«¯ç‚¹æ·»åŠ æ ‡ç­¾ï¼Œä»¥ä¾¿æŒ‰é€»è¾‘å¯¹å…¶è¿›è¡Œåˆ†ç»„ã€‚

**åœ¨è£…é¥°å™¨ä¸­æ·»åŠ  `tags` å‚æ•°ï¼š**
```python
# GET /spaceships
@app.get("/spaceships", response_model=List[Spaceship], tags=["èˆªå¤©å™¨"])
# ...

# GET /spaceships/{ship_id}
@app.get("/spaceships/{ship_id}", response_model=Spaceship, tags=["èˆªå¤©å™¨"])
# ...

# POST /spaceships
@app.post("/spaceships", response_model=Spaceship, status_code=201, tags=["èˆªå¤©å™¨"])
# ...

# PUT å’Œ DELETE ä¾æ­¤ç±»æ¨
```
ç°åœ¨ï¼Œä½ æ‰€æœ‰çš„ CRUD æ“ä½œéƒ½å°†æ•´é½åœ°åˆ†ç»„åœ¨â€œèˆªå¤©å™¨â€æ ‡é¢˜ä¸‹ã€‚

---

#### **5. å¦ä¸€ç§è§†å›¾ï¼šReDoc**
FastAPI æä¾›äº†å¦ä¸€ä¸ªâ€œå¼€ç®±å³ç”¨â€çš„æ–‡æ¡£ç•Œé¢â€”â€”**ReDoc**ã€‚å®ƒäº¤äº’æ€§è¾ƒä½ï¼Œä½†é€šå¸¸è¢«è®¤ä¸ºæ›´å…·å¯è¯»æ€§ï¼Œéå¸¸é€‚åˆé™æ€æ–‡æ¡£ã€‚

**æ‰“å¼€ `http://127.0.0.1:8000/redoc`**

ä½ ä¼šçœ‹åˆ°ä¸€ä¸ªä¸‰åˆ—å¸ƒå±€ï¼ŒåŒ…å«å¯¼èˆªã€ç«¯ç‚¹æè¿°å’Œæ•°æ®æ¨¡å¼ã€‚è¿™æ˜¯å‘ä½ çš„â€œå®¢æˆ·â€ï¼ˆä¾‹å¦‚å‰ç«¯å›¢é˜Ÿï¼‰æä¾›æ–‡æ¡£çš„å¥½æ–¹æ³•ã€‚

---

#### **å·©å›ºç»ƒä¹ å°æµ‹éªŒ**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>


<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. FastAPI ç”Ÿæˆæ–‡æ¡£çš„ä¾æ®æ˜¯...</p>
      <label><input type="radio" name="q1" value="a"> a) éœ€è¦æ‰‹åŠ¨åˆ›å»ºçš„ç‹¬ç«‹ `.html` æ–‡ä»¶</label>
      <label><input type="radio" name="q1" value="b"> b) ä½ çš„ Python ä»£ç ï¼šè·¯ç”±ã€Pydantic æ¨¡å‹å’Œæ–‡æ¡£å­—ç¬¦ä¸²</label>
      <label><input type="radio" name="q1" value="c"> c) ä»¥ `#` å¼€å¤´çš„æ³¨é‡Š</label>
    </div>
    <div class="question">
      <p>2. FastAPI è‡ªåŠ¨æ–‡æ¡£çš„åŸºç¡€æ ‡å‡†æ˜¯ä»€ä¹ˆï¼Ÿ</p>
      <label><input type="radio" name="q2" value="a"> a) GraphQL</label>
      <label><input type="radio" name="q2" value="b"> b) XML-RPC</label>
      <label><input type="radio" name="q2" value="c"> c) OpenAPI (Swagger)</label>
    </div>
    <div class="question">
      <p>3. Swagger UI äº¤äº’å¼æ–‡æ¡£é»˜è®¤åœ¨å“ªä¸ª URL ä¸‹å¯ç”¨ï¼Ÿ</p>
      <label><input type="radio" name="q3" value="a"> a) `/admin`</label>
      <label><input type="radio" name="q3" value="b"> b) `/docs`</label>
      <label><input type="radio" name="q3" value="c"> c) `/api/help`</label>
    </div>
    <div class="question">
      <p>4. è£…é¥°å™¨ `@app.get` ä¸­çš„ `tags` å‚æ•°ç”¨äºï¼š</p>
      <label><input type="radio" name="q4" value="a"> a) åœ¨ HTML ä¸­æ·»åŠ å…ƒæ ‡ç­¾</label>
      <label><input type="radio" name="q4" value="b"> b) åœ¨æ–‡æ¡£ä¸­å¯¹ç«¯ç‚¹è¿›è¡Œåˆ†ç»„</label>
      <label><input type="radio" name="q4" value="c"> c) å°†ç«¯ç‚¹æ ‡è®°ä¸ºå·²è¿‡æ—¶</label>
    </div>
    <div class="question">
      <p>5. ReDoc æ˜¯...</p>
      <label><input type="radio" name="q5" value="a"> a) æµè§ˆå™¨ä¸­çš„ä»£ç ç¼–è¾‘å·¥å…·</label>
      <label><input type="radio" name="q5" value="b"> b) API æ–‡æ¡£çš„å¦ä¸€ç§ã€æ›´é™æ€çš„ç•Œé¢</label>
      <label><input type="radio" name="q5" value="c"> c) ç”¨äºæ£€æµ‹â€œçº¢è‰²â€ï¼ˆä¸å·¥ä½œï¼‰ä»£ç çš„ç³»ç»Ÿ</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">æ£€æŸ¥</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'c', q3: 'b', q4: 'b', q5: 'b' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>ç»“æœï¼š</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:green;">æ­£ç¡®ï¼</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:red;">é”™è¯¯ã€‚</span>æ­£ç¡®ç­”æ¡ˆï¼š<b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:orange;">æœªä½œç­”ã€‚</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>ä½ çš„å¾—åˆ†ï¼š${score} / ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**ğŸš€ æœ¬ç« æ€»ç»“ï¼š**

ä½ å·²ç»äº†è§£äº† FastAPI æœ€å¼ºå¤§çš„â€œè¶…èƒ½åŠ›â€ä¹‹ä¸€â€”â€”æ¯«ä¸è´¹åŠ›åœ°åˆ›å»ºæ–‡æ¡£ã€‚

- ğŸ“– ä½ çš„ API ç°åœ¨æ‹¥æœ‰ä¸¤ç§æœ€æ–°çš„æ–‡æ¡£è§†å›¾ï¼š**Swagger UI** å’Œ **ReDoc**ã€‚
- ğŸ”¬ æ–‡æ¡£æ˜¯äº¤äº’å¼çš„ï¼Œå…è®¸ä½ å³æ—¶æµ‹è¯• APIã€‚
- ğŸ·ï¸ ä½ å­¦ä¼šäº†å¦‚ä½•é€šè¿‡å…ƒæ•°æ®å’Œæ ‡ç­¾æ¥æ”¹è¿›å®ƒã€‚

**æ“ä½œæ‰‹å†Œå·²å°±ç»ªï¼Œå¹¶ä¸”å§‹ç»ˆä¿æŒæœ€æ–°ï¼** åœ¨æœ¬èŠ‚çš„æœ€åä¸€ç« ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•å¤„ç†â€œå¤ªç©ºå¼‚å¸¸â€â€”â€”é”™è¯¯å’Œä¸æ­£ç¡®çš„æ•°æ®ã€‚

> **ğŸ“Œ æ£€æŸ¥ï¼š**

> - ç¡®ä¿åœ¨ `http://127.0.0.1:8000/docs` åœ°å€æ˜¾ç¤ºæ ‡é¢˜ã€æè¿°å’ŒæŒ‰æ ‡ç­¾åˆ†ç»„çš„ç«¯ç‚¹ã€‚
> - æ£€æŸ¥â€œSchemasâ€éƒ¨åˆ†æ˜¯å¦æ˜¾ç¤ºä½ çš„ `Spaceship` æ¨¡å‹ã€‚
> - æ‰“å¼€ `http://127.0.0.1:8000/redoc` å¹¶è¯„ä¼°æ›¿ä»£è§†å›¾ã€‚

> **âš ï¸ å¦‚æœæ›´æ”¹æœªæ˜¾ç¤ºï¼š**

> - ç¡®ä¿ä½ å·²ä¿å­˜ `main.py` æ–‡ä»¶ã€‚
> - æ£€æŸ¥ `uvicorn` æœåŠ¡å™¨æ˜¯å¦å·²ä½¿ç”¨ `--reload` æ ‡å¿—å¯åŠ¨å¹¶æˆåŠŸé‡æ–°åŠ è½½ã€‚