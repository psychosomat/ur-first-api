# **ç¬¬2.3ç« ï¼šæ•°æ®åº“è¿ç§»**
**å­¦ä¹ æ—¶é—´ï¼š** 50åˆ†é’Ÿ

---

#### **1. è¿ç§»ï¼šå»ºé€ ç©ºé—´ç«™**
Laravel ä¸­çš„**è¿ç§»**æ˜¯æ‚¨æ•°æ®åº“çš„ç‰ˆæœ¬æ§åˆ¶ç³»ç»Ÿã€‚

æƒ³è±¡ä¸€ä¸‹ï¼Œæ‚¨ï¼š

1. ğŸ—ï¸ åˆ›å»ºç©ºé—´ç«™è“å›¾ï¼ˆ`create_planets_table` è¿ç§»ï¼‰
2. ğŸš€ éƒ¨ç½²æ¨¡å—ï¼ˆè¿è¡Œè¿ç§»ï¼‰
3. ğŸ”§ æ”¹é€ ç»“æ„ï¼ˆæ–°çš„è¿ç§»ï¼‰
4. âª å¯ä»¥å›æ»šåˆ°æ—§ç‰ˆæœ¬ï¼ˆå›æ»šï¼‰

> ğŸ’¡ **é‡è¦æç¤ºï¼š** è¿ç§»ä½¿å›¢é˜Ÿèƒ½å¤Ÿåè°ƒä¸€è‡´åœ°å·¥ä½œâ€”â€”å°±åƒä¸åŒå¤§é™†çš„å·¥ç¨‹å¸ˆå»ºé€ å›½é™…ç©ºé—´ç«™ä¸€æ ·ï¼

---

#### **2. è¿è¡Œè¿ç§»**
åœ¨ç¬¬2.2ç« åˆ›å»ºè¿ç§»åï¼Œæ‰§è¡Œï¼š
```bash
php artisan migrate
```

**ç»ˆç«¯è¾“å‡ºï¼š**
```
Migration table created successfully.
Migrating: 2014_10_12_000000_create_users_table
Migrated:  2014_10_12_000000_create_users_table (25.12ms)
Migrating: 2014_10_12_100000_create_password_reset_tokens_table
Migrated:  2014_10_12_100000_create_password_reset_tokens_table (18.07ms)
Migrating: 2019_08_19_000000_create_failed_jobs_table
Migrated:  2019_08_19_000000_create_failed_jobs_table (21.33ms)
Migrating: 2019_12_14_000001_create_personal_access_tokens_table
Migrated:  2019_12_14_000001_create_personal_access_tokens_table (30.45ms)
Migrating: 2025_08_04_000000_create_planets_table
Migrated:  2025_08_04_000000_create_planets_table (15.67ms)  # æ‚¨çš„è¡¨ï¼
```

**åœ¨ pgAdmin 4 ä¸­æ£€æŸ¥ï¼š**

1. æ‰“å¼€ `space_api` æ•°æ®åº“ â†’ Schemas â†’ Tables
2. ç¡®è®¤å·²å‡ºç°ï¼š   - `planets`   - `users`   - `password_reset_tokens`

---

#### **3. å›æ»šè¿ç§»ï¼šç´§æ€¥è¿”å›**
å¦‚æœéœ€è¦ä¿®æ”¹ç»“æ„ï¼š
```bash
php artisan migrate:rollback  # å›æ»šæœ€è¿‘ä¸€æ‰¹è¿ç§»
```
```bash
php artisan migrate:reset    # å®Œå…¨å›æ»šæ‰€æœ‰è¿ç§»
```

- ```php artisan migrate:fresh``` â€” **å¼€å‘ä¸­æœ€æœ‰ç”¨çš„å‘½ä»¤ï¼** å®ƒä¼šåˆ é™¤æ‰€æœ‰è¡¨å¹¶é‡æ–°è¿è¡Œæ‰€æœ‰è¿ç§»ã€‚
- ```php artisan migrate:fresh --seed``` â€” æ‰§è¡Œä¸ `fresh` ç›¸åŒçš„æ“ä½œï¼Œä½†åœ¨è¿ç§»åç«‹å³è¿è¡Œæ•°æ®å¡«å……å™¨ã€‚è¿™æ˜¯ç”¨äºä»å¤´å¼€å§‹å®Œå…¨â€œé‡æ–°åˆ›å»ºâ€æ•°æ®åº“çš„å‘½ä»¤ã€‚


**ä½¿ç”¨åœºæ™¯ï¼š**
```bash
# æ­¥éª¤ 1ï¼šå‘ç°è¿ç§»ä¸­å­˜åœ¨é”™è¯¯ã€‚å®Œå…¨é‡æ–°åˆ›å»ºæ•°æ®åº“ã€‚
php artisan migrate:fresh
# æ­¥éª¤ 2ï¼šç¼–è¾‘è¿ç§»
# æ­¥éª¤ 3ï¼šå†æ¬¡ä½¿ç”¨å·²ä¿®å¤çš„è¿ç§»é‡æ–°åˆ›å»ºæ•°æ®åº“
php artisan migrate:fresh
```

---

#### **4. æ·»åŠ æ–°å­—æ®µï¼šç©ºé—´ç«™ç°ä»£åŒ–**
**ç¤ºä¾‹ï¼š** æ·»åŠ  `is_habitable` å­—æ®µï¼ˆæ˜Ÿçƒæ˜¯å¦å®œå±…ï¼‰ã€‚

**æ­¥éª¤ 1ï¼šåˆ›å»ºæ–°çš„è¿ç§»**
```bash
php artisan make:migration add_is_habitable_to_planets_table
```

**æ­¥éª¤ 2ï¼šç¼–è¾‘æ–‡ä»¶** `database/migrations/..._add_is_habitable_to_planets_table.php`
```php
<?php
public function up()
{
    Schema::table('planets', function (Blueprint $table) {
        $table->boolean('is_habitable')
              ->default(false);
    });
}

public function down()
{
    Schema::table('planets', function (Blueprint $table) {
        $table->dropColumn('is_habitable');
    });
}
```

**æ­¥éª¤ 3ï¼šè¿è¡Œæ›´æ–°**
```bash
php artisan migrate
```

---

#### **5. å¡«å……æ•°æ®åº“ï¼šç¬¬ä¸€æ‰¹æ˜Ÿçƒ**
åˆ›å»º **æ•°æ®å¡«å……å™¨ï¼ˆSeederï¼‰** â€” ç”¨äºç”Ÿæˆæµ‹è¯•æ•°æ®çš„è„šæœ¬ã€‚

**æ­¥éª¤ 1ï¼šç”Ÿæˆæ•°æ®å¡«å……å™¨**
```bash
php artisan make:seeder PlanetSeeder
```

**æ­¥éª¤ 2ï¼šç¼–è¾‘** `database/seeders/PlanetSeeder.php`
```php
<?php
use App\Models\Planet; // å¯¼å…¥æ˜Ÿçƒæ¨¡å‹ - æ²¡æœ‰å®ƒä½ ä¼šé‡åˆ°é”™è¯¯ï¼


class PlanetSeeder extends Seeder
{
    public function run()
    {
        Planet::create([
            'name' => 'åœ°çƒ',
            'description' => 'ä¸€é¢—æ‹¥æœ‰å¤šæ ·ç”Ÿå‘½çš„è“è‰²æ˜Ÿçƒ',
            'size_km' => 12742,
            'solar_system' => 'å¤ªé˜³ç³»',
            'image_url' => 'https://example.com/earth.jpg',
            'is_habitable' => true
        ]);

        Planet::create([
            'name' => 'ç«æ˜Ÿ',
            'description' => 'ä¸€é¢—çº¢è‰²æ˜Ÿçƒï¼Œæœªæ¥æ®–æ°‘çš„ç›®æ ‡',
            'size_km' => 6779,
            'solar_system' => 'å¤ªé˜³ç³»',
            'is_habitable' => false
        ]);
    }
}
```

**æ­¥éª¤ 3ï¼šåœ¨** `database/seeders/DatabaseSeeder.php` **ä¸­æ³¨å†Œæ•°æ®å¡«å……å™¨**
```php
<?php
public function run()
{
    $this->call([
        PlanetSeeder::class
    ]);
}
```

**æ­¥éª¤ 4ï¼šè¿è¡Œå¡«å……**
```bash
php artisan db:seed
```

---

#### **6. ä½¿ç”¨ PostgreSQLï¼šç‰¹æ®Šæ€§**
**æ•°æ®ç±»å‹ç‰¹æ€§ï¼š**

| åŠŸèƒ½ | PostgreSQL | MySQL | Laravel æ³¨é‡Š |
|---|---|---|---|
| **å¸ƒå°”ç±»å‹** | `boolean`ï¼ˆçœŸæ­£çš„ `true`/`false`ï¼‰ | `tinyint(1)`ï¼ˆå­˜å‚¨ `0`/`1`ï¼‰ | `$table->boolean('...')` ä¸¤è€…éƒ½é€‚ç”¨ |
| **JSON** | `jsonb`ï¼ˆäºŒè¿›åˆ¶ï¼Œå¯ç´¢å¼•ï¼‰ | `json`ï¼ˆæ–‡æœ¬ï¼‰ | `$table->jsonb('...')` - åœ¨ PG ä¸­éå¸¸å¼ºå¤§ |
| **æ•°ç»„** | `text[]`ã€`integer[]`ï¼ˆåŸç”Ÿæ•°ç»„ï¼‰ | æ— ï¼ˆé€šè¿‡ JSON æˆ–å­—ç¬¦ä¸²æ¨¡æ‹Ÿï¼‰ | `$table->array('...')`ï¼ˆPG ä¸“å±ï¼‰ |
| **åˆ—é¡ºåº** | æ— æ³•æ§åˆ¶ï¼ˆ`after()` ä¸èµ·ä½œç”¨ï¼‰ | å¯ä»¥æ§åˆ¶ï¼ˆ`after()`ï¼‰ | Laravel å¯¹å…¶è¿›è¡Œäº†æŠ½è±¡ï¼Œä½†æ‚¨éœ€è¦äº†è§£æ­¤é™åˆ¶ |


**åˆ›å»ºç´¢å¼•ç¤ºä¾‹ï¼š**
```php
// åœ¨è¿ç§»ä¸­
$table->index('solar_system');
```

---

#### **7. åœ¨ psql ä¸­æ£€æŸ¥æ•°æ®**

æ‚¨å¯ä»¥ä½¿ç”¨ä»»ä½•å›¾å½¢å®¢æˆ·ç«¯ï¼Œå¹¶åœ¨å…¶ä¸­é€‰æ‹© `space_api` æ¥æŸ¥çœ‹ã€‚

ä½¿ç”¨æ§åˆ¶å°æ—¶ï¼š
```bash
psql -U postgres -d space_api
# ç»ˆç«¯å¯èƒ½ä¼šè¦æ±‚æ‚¨åœ¨å®‰è£… PostgreSQL æ—¶è®¾ç½®çš„å¯†ç ã€‚
```
```sql
SELECT * FROM planets;
```

æ— è®ºå¦‚ä½•ï¼Œè¾“å‡ºåº”è¯¥å¦‚ä¸‹ï¼š

 id |  åç§°  | æè¿° | å¤§å°ï¼ˆå…¬é‡Œï¼‰ |  å¤ªé˜³ç³»   | å›¾ç‰‡URL | æ˜¯å¦å®œå±… |
|---|---|---|---|---|---|---|
  1 | åœ°çƒ  | ä¸€é¢—æ‹¥æœ‰å¤šæ ·ç”Ÿå‘½çš„è“è‰²æ˜Ÿçƒ   |   12742 | å¤ªé˜³ç³»| ...       | true |
  2 | ç«æ˜Ÿ   | ä¸€é¢—çº¢è‰²æ˜Ÿçƒï¼Œæ®–æ°‘ç›®æ ‡        |    6779 | å¤ªé˜³ç³»| null      | false |


---

#### **å·©å›ºæµ‹éªŒ**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. è¿è¡Œè¿ç§»çš„å‘½ä»¤ï¼š</p>
      <label><input type="radio" name="q1" value="a"> a) php artisan migrate:run</label>
      <label><input type="radio" name="q1" value="b"> b) php artisan migrate</label>
      <label><input type="radio" name="q1" value="c"> c) php artisan db:migrate</label>
    </div>
    <div class="question">
      <p>2. å¦‚ä½•å›æ»šæœ€åä¸€æ¬¡è¿ç§»ï¼Ÿ</p>
      <label><input type="radio" name="q2" value="a"> a) migrate:undo</label>
      <label><input type="radio" name="q2" value="b"> b) migrate:rollback</label>
      <label><input type="radio" name="q2" value="c"> c) migrate:reset</label>
    </div>
    <div class="question">
      <p>3. æ•°æ®å¡«å……å™¨ç”¨äºï¼š</p>
      <label><input type="radio" name="q3" value="a"> a) åˆ é™¤è¡¨</label>
      <label><input type="radio" name="q3" value="b"> b) ç”¨æµ‹è¯•æ•°æ®å¡«å……æ•°æ®åº“</label>
      <label><input type="radio" name="q3" value="c"> c) åˆ›å»ºæ¨¡å‹</label>
    </div>
    <div class="question">
      <p>4. åœ¨ç°æœ‰è¡¨ä¸­æ·»åŠ åˆ—çš„æ–¹æ³•ï¼š</p>
      <label><input type="radio" name="q4" value="a"> a) Schema::addColumn()</label>
      <label><input type="radio" name="q4" value="b"> b) Schema::table()</label>
      <label><input type="radio" name="q4" value="c"> c) Schema::modify()</label>
    </div>
    <div class="question">
      <p>5. æ•°æ®å¡«å……å™¨åœ¨å“ªé‡Œæ³¨å†Œï¼Ÿ</p>
      <label><input type="radio" name="q5" value="a"> a) DatabaseSeeder.php</label>
      <label><input type="radio" name="q5" value="b"> b) .env</label>
      <label><input type="radio" name="q5" value="c"> c) config/database.php</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">æ£€æŸ¥</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'b', q3: 'b', q4: 'b', q5: 'a' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>ç»“æœï¼š</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:green;">æ­£ç¡®ï¼</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:red;">é”™è¯¯ã€‚</span> æ­£ç¡®ç­”æ¡ˆï¼š<b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>é—®é¢˜ ${question.slice(1)}: <span style="color:orange;">æœªä½œç­”ã€‚</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>æ‚¨çš„å¾—åˆ†ï¼š${score} / ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>


---

**ğŸš€ æœ¬ç« æ€»ç»“ï¼š**

æ‚¨å·²æŒæ¡â€œå¤ªç©ºåŸºç¡€è®¾æ–½å»ºè®¾â€ï¼š

- âœ… åˆ›å»ºå¹¶è¿è¡Œäº†è¿ç§»
- ğŸ”§ æ”¹é€ äº†è¡¨ç»“æ„
- ğŸŒ ç”¨ç¬¬ä¸€æ‰¹æ˜Ÿçƒå¡«å……äº†æ•°æ®åº“
- âš™ï¸ å­¦ä¼šäº†ä½¿ç”¨ PostgreSQL

**æ‚¨çš„å®‡å®™æ‹¥æœ‰äº†ç¬¬ä¸€æ‰¹ä¸–ç•Œï¼** ç°åœ¨å¯ä»¥å¼€å§‹åˆ›å»ºç”¨äºç®¡ç†æ˜Ÿçƒçš„ API æ¥å£äº†ã€‚

> **ğŸ“Œ æ£€æŸ¥ï¼š**

> 1. è¿è¡Œ `php artisan tinker`
> 2. æ‰§è¡Œ `App\Models\Planet::all()`
> 3. ç¡®è®¤æ‚¨èƒ½çœ‹åˆ°åœ°çƒå’Œç«æ˜Ÿ