# **–ì–ª–∞–≤–∞ 2.8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API**
**–í—Ä–µ–º—è –∏–∑—É—á–µ–Ω–∏—è:** 1 —á–∞—Å

---

#### **1. –ó–∞—á–µ–º –Ω—É–∂–Ω—ã —Ç–µ—Å—Ç—ã?**

–ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã –ø–æ—Å—Ç—Ä–æ–∏–ª–∏ –∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å. –ü—Ä–µ–∂–¥–µ —á–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –µ–≥–æ –Ω–∞ –ú–∞—Ä—Å, –≤—ã –ø—Ä–æ–≤–æ–¥–∏—Ç–µ —Ç—ã—Å—è—á–∏ –ø—Ä–æ–≤–µ—Ä–æ–∫ –Ω–∞ –ó–µ–º–ª–µ. –¢–µ—Å—Ç—ã –≤ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–∏ ‚Äî —ç—Ç–æ —Ç–æ –∂–µ —Å–∞–º–æ–µ. –û–Ω–∏:

-   **–î–∞—é—Ç —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å:** –í—ã –º–æ–∂–µ—Ç–µ –º–µ–Ω—è—Ç—å –∫–æ–¥, –∏ –µ—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç ‚Äî –∑–Ω–∞—á–∏—Ç, –≤—ã –Ω–∏—á–µ–≥–æ –Ω–µ —Å–ª–æ–º–∞–ª–∏.
-   **–≠–∫–æ–Ω–æ–º—è—Ç –≤—Ä–µ–º—è:** –í–º–µ—Å—Ç–æ —Ç–æ–≥–æ —á—Ç–æ–±—ã –≤—Ä—É—á–Ω—É—é "–ø—Ä–æ–∫–ª–∏–∫–∏–≤–∞—Ç—å" –≤—Å–µ –≤ Postman –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∏–∑–º–µ–Ω–µ–Ω–∏—è, –≤—ã –∑–∞–ø—É—Å–∫–∞–µ—Ç–µ –æ–¥–Ω—É –∫–æ–º–∞–Ω–¥—É, –∏ –æ–Ω–∞ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤—Å–µ –∑–∞ –≤–∞—Å –∑–∞ —Å–µ–∫—É–Ω–¥—ã.
-   **–°–ª—É–∂–∞—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π:** –•–æ—Ä–æ—à–∏–µ —Ç–µ—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç, –∫–∞–∫ –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—à API.

---

#### **2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–π "–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏"**

Laravel –¥–µ–ª–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫—É —Ç–µ—Å—Ç–æ–≤ –Ω–µ–≤–µ—Ä–æ—è—Ç–Ω–æ –ø—Ä–æ—Å—Ç–æ–π. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é, –æ–Ω –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é, —á—Ç–æ–±—ã –Ω–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –≤–∞—à—É –æ—Å–Ω–æ–≤–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö.

**–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–æ–≤:**
–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é Laravel –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö **–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏** (`:memory:`). –≠—Ç–æ —Å–∞–º—ã–π –±—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–±, –ø–æ—Ç–æ–º—É —á—Ç–æ –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –ø–∏—Å–∞—Ç—å –Ω–∞ –¥–∏—Å–∫. –ë–∞–∑–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∞–º–∏ –∏ —É–Ω–∏—á—Ç–æ–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –Ω–∏—Ö. –ù–∞–º –¥–∞–∂–µ –Ω–µ –Ω—É–∂–Ω–æ –Ω–∏—á–µ–≥–æ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å –¥–ª—è —ç—Ç–æ–≥–æ!

**–°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞:**
–î–∞–≤–∞–π—Ç–µ —Å–æ–∑–¥–∞–¥–∏–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è —Ç–µ—Å—Ç–æ–≤, —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –ø–ª–∞–Ω–µ—Ç–∞–º–∏.

```bash
php artisan make:test PlanetApiTest
```

–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ —Å–æ–∑–¥–∞—Å—Ç —Ñ–∞–π–ª `tests/Feature/PlanetApiTest.php`. –°–ª–æ–≤–æ `Feature` –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –±—É–¥–µ–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ —Ü–µ–ª–æ–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–º–æ–∂–µ—Ç –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞—Ç—å –ø–ª–∞–Ω–µ—Ç—É?"), –∞ –Ω–µ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–∞–ª–µ–Ω—å–∫–∏–π –∫–ª–∞—Å—Å.

---

#### **3. –ê–Ω–∞—Ç–æ–º–∏—è —Ç–µ—Å—Ç–∞: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞, –î–µ–π—Å—Ç–≤–∏–µ, –ü—Ä–æ–≤–µ—Ä–∫–∞**

–û—Ç–∫—Ä–æ–π—Ç–µ `tests/Feature/PlanetApiTest.php`. –í–Ω—É—Ç—Ä–∏ –º—ã –Ω–∞–ø–∏—à–µ–º –Ω–∞—à –ø–µ—Ä–≤—ã–π —Ç–µ—Å—Ç. –•–æ—Ä–æ—à–∏–π —Ç–µ—Å—Ç –≤—Å–µ–≥–¥–∞ —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Ç—Ä–µ—Ö —á–∞—Å—Ç–µ–π (Arrange, Act, Assert).

```php
<?php

namespace Tests\Feature;

use App\Models\Planet; // –ù–µ –∑–∞–±—É–¥—å—Ç–µ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª—å
use Illuminate\Foundation\Testing\RefreshDatabase; // –í–∞–∂–Ω–µ–π—à–∏–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç!
use Tests\TestCase;

class PlanetApiTest extends TestCase
{
    // –≠—Ç–æ—Ç —Ç—Ä–µ–π—Ç "–≤–æ–ª—à–µ–±–Ω—ã–º –æ–±—Ä–∞–∑–æ–º" –æ—á–∏—â–∞–µ—Ç –∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç
    // –Ω–∞—à—É —Ç–µ—Å—Ç–æ–≤—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Ç–µ—Å—Ç–æ–º.
    // –≠—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ —Ç–µ—Å—Ç—ã –Ω–µ –≤–ª–∏—è—é—Ç –¥—Ä—É–≥ –Ω–∞ –¥—Ä—É–≥–∞.
    use RefreshDatabase;

    /**
     * –¢–µ—Å—Ç: —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø–∏—Å–∫–∞ –ø–ª–∞–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
     * –ù–∞–∑–≤–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Å–º—ã—Å–ª–µ–Ω–Ω—ã–º–∏!
     */
    public function test_can_get_all_planets(): void
    {
        // 1. –ü–û–î–ì–û–¢–û–í–ö–ê (Arrange)
        // –°–æ–∑–¥–∞–µ–º 3 —Ñ–µ–π–∫–æ–≤—ã–µ –ø–ª–∞–Ω–µ—Ç—ã –≤ –Ω–∞—à–µ–π —Ç–µ—Å—Ç–æ–≤–æ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
        // —Å –ø–æ–º–æ—â—å—é —Ñ–∞–±—Ä–∏–∫–∏, –∫–æ—Ç–æ—Ä—É—é –º—ã —Å–æ–∑–¥–∞–ª–∏ —Ä–∞–Ω–µ–µ.
        Planet::factory()->count(3)->create();

        // 2. –î–ï–ô–°–¢–í–ò–ï (Act)
        // –ò–º–∏—Ç–∏—Ä—É–µ–º –Ω–∞—Å—Ç–æ—è—â–∏–π GET-–∑–∞–ø—Ä–æ—Å –∫ –Ω–∞—à–µ–º—É API.
        $response = $this->getJson('/api/planets');

        // 3. –ü–†–û–í–ï–†–ö–ê (Assert)
        // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤—Å–µ –ø—Ä–æ—à–ª–æ –∫–∞–∫ –Ω–∞–¥–æ.
        $response->assertStatus(200); // –û–∂–∏–¥–∞–µ–º, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä –æ—Ç–≤–µ—Ç–∏–ª "200 OK"
        $response->assertJsonCount(3); // –û–∂–∏–¥–∞–µ–º, —á—Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ —Ä–æ–≤–Ω–æ 3 –ø–ª–∞–Ω–µ—Ç—ã
    }
}
```
**–ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã:**

-   `use RefreshDatabase`: –≠—Ç–æ—Ç —Ç—Ä–µ–π—Ç ‚Äî –≤–∞—à –ª—É—á—à–∏–π –¥—Ä—É–≥. –û–Ω –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç, —á—Ç–æ –∫–∞–∂–¥—ã–π —Ç–µ—Å—Ç –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å "—á–∏—Å—Ç–æ–≥–æ –ª–∏—Å—Ç–∞", —Å –ø—É—Å—Ç–æ–π –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö.
-   `Planet::factory()`: –§–∞–±—Ä–∏–∫–∏ –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥—è—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.
-   `$this->getJson()`: –≠—Ç–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ Laravel –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ API-–∑–∞–ø—Ä–æ—Å–æ–≤ –≤–Ω—É—Ç—Ä–∏ —Ç–µ—Å—Ç–æ–≤.
-   `assert...()`: –≠—Ç–æ "—É—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è" –∏–ª–∏ "–ø—Ä–æ–≤–µ—Ä–∫–∏". –ï—Å–ª–∏ —Ö–æ—Ç—è –±—ã –æ–¥–Ω–∞ –∏–∑ –Ω–∏—Ö –Ω–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—Å—è, —Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è.

---

#### **4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (CRUD)**

–î–∞–≤–∞–π—Ç–µ –Ω–∞–ø–∏—à–µ–º —Ç–µ—Å—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è, –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∏ —É–¥–∞–ª–µ–Ω–∏—è –ø–ª–∞–Ω–µ—Ç.

**A. –¢–µ—Å—Ç –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã (POST)**

```php
<?php
public function test_can_create_a_planet(): void
{
    // 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: –≥–æ—Ç–æ–≤–∏–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –Ω–æ–≤–æ–π –ø–ª–∞–Ω–µ—Ç—ã
    $planetData = [
        'name' => 'Kepler-186f',
        'description' => '–ü–µ—Ä–≤–∞—è —ç–∫–∑–æ–ø–ª–∞–Ω–µ—Ç–∞ —Ä–∞–∑–º–µ—Ä–æ–º —Å –ó–µ–º–ª—é –≤ –æ–±–∏—Ç–∞–µ–º–æ–π –∑–æ–Ω–µ.',
        'size_km' => 14000,
        'solar_system' => 'Kepler-186'
    ];

    // 2. –î–µ–π—Å—Ç–≤–∏–µ: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º POST-–∑–∞–ø—Ä–æ—Å —Å –¥–∞–Ω–Ω—ã–º–∏
    $response = $this->postJson('/api/planets', $planetData);

    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
    $response->assertStatus(201); // –û–∂–∏–¥–∞–µ–º —Å—Ç–∞—Ç—É—Å "201 Created"
    $response->assertJsonFragment(['name' => 'Kepler-186f']); // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –≤ –æ—Ç–≤–µ—Ç–µ –µ—Å—Ç—å —Å–æ–∑–¥–∞–Ω–Ω–æ–µ –∏–º—è

    // –°–∞–º–∞—è –≤–∞–∂–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞: –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –ª–∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ø–∞–ª–∏ –≤ –±–∞–∑—É?
    $this->assertDatabaseHas('planets', [
        'name' => 'Kepler-186f'
    ]);
}
```

**B. –¢–µ—Å—Ç –Ω–∞ —É–¥–∞–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–µ—Ç—ã (DELETE)**
```php
<?php
public function test_can_delete_a_planet(): void
{
    // 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞: —Å–æ–∑–¥–∞–µ–º –ø–ª–∞–Ω–µ—Ç—É, –∫–æ—Ç–æ—Ä—É—é –±—É–¥–µ–º —É–¥–∞–ª—è—Ç—å
    $planet = Planet::factory()->create();

    // 2. –î–µ–π—Å—Ç–≤–∏–µ: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º DELETE-–∑–∞–ø—Ä–æ—Å
    $response = $this->deleteJson("/api/planets/{$planet->id}");

    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
    $response->assertStatus(204); // –û–∂–∏–¥–∞–µ–º "204 No Content" - —É—Å–ø–µ—à–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ

    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∑–∞–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏—Å—á–µ–∑–ª–∞ –∏–∑ –±–∞–∑—ã
    $this->assertDatabaseMissing('planets', [
        'id' => $planet->id
    ]);
}
```

---

#### **5. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ "–ø–ª–æ—Ö–∏—Ö" —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —É—Å–ø–µ—à–Ω—ã–µ —Å–ª—É—á–∞–∏ ‚Äî —ç—Ç–æ —Ö–æ—Ä–æ—à–æ. –ù–æ –µ—â–µ –≤–∞–∂–Ω–µ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—à–∏–±–∫–∏!

**A. –¢–µ—Å—Ç –Ω–∞ –æ—à–∏–±–∫—É –≤–∞–ª–∏–¥–∞—Ü–∏–∏**
```php
<?php
public function test_creation_fails_with_invalid_data(): void
{
    // 2. –î–µ–π—Å—Ç–≤–∏–µ: –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∑–∞–≤–µ–¥–æ–º–æ –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
    $response = $this->postJson('/api/planets', ['name' => '']); // –ü—É—Å—Ç–æ–µ –∏–º—è

    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
    $response->assertStatus(422); // –û–∂–∏–¥–∞–µ–º "422 Unprocessable Entity"
    $response->assertJsonValidationErrors('name'); // –û–∂–∏–¥–∞–µ–º, —á—Ç–æ –æ—à–∏–±–∫–∞ –∏–º–µ–Ω–Ω–æ –≤ –ø–æ–ª–µ 'name'
}
```

**B. –¢–µ—Å—Ç –Ω–∞ "–Ω–µ –Ω–∞–π–¥–µ–Ω–æ" (404)**
```php
<?php
public function test_returns_404_for_non_existent_planet(): void
{
    // 2. –î–µ–π—Å—Ç–≤–∏–µ: –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–ª–∞–Ω–µ—Ç—É —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º ID
    $response = $this->getJson('/api/planets/99999');

    // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞
    $response->assertStatus(404); // –û–∂–∏–¥–∞–µ–º "404 Not Found"
}
```

---

#### **6. –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤**

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —Ç–µ—Å—Ç—ã –Ω–∞–ø–∏—Å–∞–Ω—ã, –∑–∞–ø—É—Å—Ç–∏—Ç—å –∏—Ö –æ—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ. –í—ã–ø–æ–ª–Ω–∏—Ç–µ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:

```bash
php artisan test
```

Laravel –Ω–∞–π–¥–µ—Ç –≤—Å–µ –≤–∞—à–∏ —Ç–µ—Å—Ç—ã –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç –∏—Ö –æ–¥–∏–Ω –∑–∞ –¥—Ä—É–≥–∏–º. –ï—Å–ª–∏ –≤—Å–µ –ø—Ä–æ–π–¥–µ—Ç —É—Å–ø–µ—à–Ω–æ, –≤—ã —É–≤–∏–¥–∏—Ç–µ –∑–µ–ª–µ–Ω—ã–π –≤—ã–≤–æ–¥. –ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ —Ç–µ—Å—Ç –ø—Ä–æ–≤–∞–ª–∏—Ç—Å—è, –≤—ã —É–≤–∏–¥–∏—Ç–µ –∫—Ä–∞—Å–Ω—ã–π –≤—ã–≤–æ–¥ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º –æ—à–∏–±–∫–∏, —á—Ç–æ –ø–æ–∑–≤–æ–ª–∏—Ç –≤–∞–º –±—ã—Å—Ç—Ä–æ –µ–µ –∏—Å–ø—Ä–∞–≤–∏—Ç—å.

**–ß—Ç–æ–±—ã –∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Ñ–∞–π–ª:**
```bash
php artisan test tests/Feature/PlanetApiTest.php
```

---

#### **8. –ü–æ–∫—Ä—ã—Ç–∏–µ –∫–æ–¥–∞ (Code Coverage)**
**–®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Xdebug**

–î–ª—è —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ –∫–æ–¥–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ PHP ‚Äî [Xdebug](https://xdebug.org/wizard).
>–û—Ç–ø—Ä–∞–≤—å—Ç–µ –≤ wizard –≤–∞—à `php -i` –∏ —Å–ª–µ–¥—É–π—Ç–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è–º.

**–®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ `phpunit.xml`**
```xml
<phpunit ... >
    <coverage processUncoveredFiles="true">
        <include>
            <directory suffix=".php">./app</directory>
        </include>
    </coverage>
</phpunit>
```

**–®–∞–≥ 3: –ó–∞–ø—É—Å–∫ —Å –æ—Ç—á–µ—Ç–æ–º**
```bash
php artisan test --coverage-html=coverage
```
–û—Ç—á–µ—Ç: –û—Ç–∫—Ä–æ–π—Ç–µ `coverage/index.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ

---

#### **9. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Postman**
**–ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ Newman:**

1. –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –∫–æ–ª–ª–µ–∫—Ü–∏—é Postman –≤ `tests/Postman/SpaceApi.postman_collection.json`
2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Newman:
```bash
npm install -g newman
```
3. –î–æ–±–∞–≤—å—Ç–µ —Å–∫—Ä–∏–ø—Ç –≤ `composer.json`:
```json
"scripts": {
    "test:postman": "newman run tests/Postman/SpaceApi.postman_collection.json"
}
```
4. –ó–∞–ø—É—Å–∫:
```bash
composer test:postman
```

---

#### **–ö–≤–∏–∑ –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. –ö–æ–º–∞–Ω–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –∫–ª–∞—Å—Å–∞:</p>
      <label><input type="radio" name="q1" value="a"> a) php artisan make:test</label>
      <label><input type="radio" name="q1" value="b"> b) php artisan generate:test</label>
      <label><input type="radio" name="q1" value="c"> c) php artisan test:create</label>
    </div>
    <div class="question">
      <p>2. –¢—Ä–µ–π—Ç RefreshDatabase –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:</p>
      <label><input type="radio" name="q2" value="a"> a) –û—á–∏—Å—Ç–∫–∏ –ë–î –ø–æ—Å–ª–µ —Ç–µ—Å—Ç–æ–≤</label>
      <label><input type="radio" name="q2" value="b"> b) –ù–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏</label>
      <label><input type="radio" name="q2" value="c"> c) –°–æ–∑–¥–∞–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ë–î</label>
    </div>
    <div class="question">
      <p>3. –ú–µ—Ç–æ–¥ –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ JSON-—Å—Ç—Ä—É–∫—Ç—É—Ä—ã:</p>
      <label><input type="radio" name="q3" value="a"> a) assertJsonFormat()</label>
      <label><input type="radio" name="q3" value="b"> b) assertJsonStructure()</label>
      <label><input type="radio" name="q3" value="c"> c) assertJsonSchema()</label>
    </div>
    <div class="question">
      <p>4. –§–∞–±—Ä–∏–∫–∏ –≤ Laravel –Ω—É–∂–Ω—ã –¥–ª—è:</p>
      <label><input type="radio" name="q4" value="a"> a) –ì–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö</label>
      <label><input type="radio" name="q4" value="b"> b) –°–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π</label>
      <label><input type="radio" name="q4" value="c"> c) –û–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫</label>
    </div>
    <div class="question">
      <p>5. –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Postman-–∫–æ–ª–ª–µ–∫—Ü–∏–π –∏–∑ CLI:</p>
      <label><input type="radio" name="q5" value="a"> a) Newman</label>
      <label><input type="radio" name="q5" value="b"> b) Postman CLI</label>
      <label><input type="radio" name="q5" value="c"> c) Artisan</label>
    </div>
    <button type="button" onclick="checkQuizAnswers()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'a', q2: 'a', q3: 'b', q4: 'a', q5: 'a' };
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>–í–æ–ø—Ä–æ—Å ${question.slice(1)}: <span style="color:green;">–í–µ—Ä–Ω–æ!</span></li>`;
        } else {
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>–í–æ–ø—Ä–æ—Å ${question.slice(1)}: <span style="color:red;">–ù–µ–≤–µ—Ä–Ω–æ.</span> –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç: <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>–í–æ–ø—Ä–æ—Å ${question.slice(1)}: <span style="color:orange;">–ù–µ—Ç –æ—Ç–≤–µ—Ç–∞.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>–í–∞—à —Ä–µ–∑—É–ª—å—Ç–∞—Ç: ${score} –∏–∑ ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**üöÄ –ò—Ç–æ–≥ –≥–ª–∞–≤—ã:**

–í—ã –ø—Ä–æ–≤–µ–ª–∏ –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–µ–¥–ø–æ–ª–µ—Ç–Ω—ã—Ö –∏—Å–ø—ã—Ç–∞–Ω–∏–π! –¢–µ–ø–µ—Ä—å –≤–∞—à API:

- ‚úÖ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ä–µ–¥—É –±–µ–∑ –ª–∏—à–Ω–∏—Ö —É—Å–∏–ª–∏–π
- üõ°Ô∏è –ü–∏—Å–∞—Ç—å —Ç–µ—Å—Ç—ã –ø–æ –ø—Ä–∏–Ω—Ü–∏–ø—É "–ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞-–î–µ–π—Å—Ç–≤–∏–µ-–ü—Ä–æ–≤–µ—Ä–∫–∞".
- üìä –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∫ —É—Å–ø–µ—à–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ (CRUD), —Ç–∞–∫ –∏ –æ—à–∏–±–∫–∏ (–≤–∞–ª–∏–¥–∞—Ü–∏—è, 404).
- üîÅ –ó–∞–ø—É—Å–∫–∞—Ç—å —Ç–µ—Å—Ç—ã –æ–¥–Ω–æ–π –∫–æ–º–∞–Ω–¥–æ–π –∏ –±—ã—Ç—å —É–≤–µ—Ä–µ–Ω–Ω—ã–º –≤ —Å–≤–æ–µ–º –∫–æ–¥–µ.

**–ö–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å –∫ –∑–∞–ø—É—Å–∫—É –≥–æ—Ç–æ–≤!** –í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ —Ä–∞–∑–¥–µ–ª –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é API –Ω–∞ Laravel.

> **üìå –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:**

> 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `php artisan test`
> 2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (–∑–µ–ª–µ–Ω—ã–π —Å–≤–µ—Ç!)
> 3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—á–µ—Ç –æ –ø–æ–∫—Ä—ã—Ç–∏–∏

> **‚ö†Ô∏è –ï—Å–ª–∏ —Ç–µ—Å—Ç—ã –ø–∞–¥–∞—é—Ç:**

> - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É API —á–µ—Ä–µ–∑ Postman
> - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ç–µ—Å—Ç–æ–≤–∞—è –ë–î –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
> - –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `dd($response->content())` –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

**–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º —Å –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ–º –ì–ª–∞–≤—ã 2!** –í—ã –Ω–µ –ø—Ä–æ—Å—Ç–æ —Å–æ–∑–¥–∞–ª–∏ API, –≤—ã —Å–æ–∑–¥–∞–ª–∏ –Ω–∞–¥–µ–∂–Ω—ã–π –∏ –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π "–∫–æ—Å–º–∏—á–µ—Å–∫–∏–π –∫–æ—Ä–∞–±–ª—å", –≥–æ—Ç–æ–≤—ã–π –∫ –¥–∞–ª—å–Ω–µ–π—à–∏–º –º–∏—Å—Å–∏—è–º.

> **üåå –î–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏:**

> 1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (Sanctum)
> 2. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —Å –ø–æ–º–æ—â—å—é Swagger
> 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ (Forge, VPS)
> 4. –ù–∞–ø–∏—Å–∞–Ω–∏–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞ Vue/React

**–£—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –≤–∞—à–µ–π –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –º–∏—Å—Å–∏–∏! –í —Å–ª–µ–¥—É—é—â–µ–π –≥–ª–∞–≤–µ –º—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –Ω–∞–ø–∏—Å–∞–Ω–∏–µ API —Å –Ω—É–ª—è** üöÄ
