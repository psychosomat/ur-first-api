# **–ì–ª–∞–≤–∞ 2.3: –ú–∏–≥—Ä–∞—Ü–∏–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö**
**–í—Ä–µ–º—è –∏–∑—É—á–µ–Ω–∏—è:** 50 –º–∏–Ω—É—Ç
**–¶–µ–ª—å:** –°–æ–∑–¥–∞—Ç—å –∏ —É–ø—Ä–∞–≤–ª—è—Ç—å "–∑–≤–µ–∑–¥–Ω—ã–º–∏ –∫–∞—Ä—Ç–∞–º–∏" –≤–∞—à–µ–π –≤—Å–µ–ª–µ–Ω–Ω–æ–π - —Å—Ç—Ä—É–∫—Ç—É—Ä–∞–º–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

---

#### **1. –ú–∏–≥—Ä–∞—Ü–∏–∏: –°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π —Å—Ç–∞–Ω—Ü–∏–∏**
**–ú–∏–≥—Ä–∞—Ü–∏–∏** –≤ Laravel ‚Äî —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –∫–æ–Ω—Ç—Ä–æ–ª—è –≤–µ—Ä—Å–∏–π –¥–ª—è –≤–∞—à–µ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–µ–¥—Å—Ç–∞–≤—å—Ç–µ, —á—Ç–æ –≤—ã:
1. üèóÔ∏è –°–æ–∑–¥–∞–µ—Ç–µ —á–µ—Ä—Ç–µ–∂ —Å—Ç–∞–Ω—Ü–∏–∏ (–º–∏–≥—Ä–∞—Ü–∏—è `create_planets_table`)
2. üöÄ –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç–µ –º–æ–¥—É–ª–∏ (–∑–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π)
3. üîß –ú–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä—É–µ—Ç–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—é (–Ω–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏)
4. ‚è™ –ú–æ–∂–µ—Ç–µ –æ—Ç–∫–∞—Ç–∏—Ç—å—Å—è –∫ –ø—Ä–æ—à–ª–æ–π –≤–µ—Ä—Å–∏–∏ (rollback)

> üí° **–í–∞–∂–Ω–æ:** –ú–∏–≥—Ä–∞—Ü–∏–∏ –ø–æ–∑–≤–æ–ª—è—é—Ç –∫–æ–º–∞–Ω–¥–µ —Ä–∞–±–æ—Ç–∞—Ç—å —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ ‚Äî –∫–∞–∫ –∏–Ω–∂–µ–Ω–µ—Ä—ã –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –∫–æ–Ω—Ç–∏–Ω–µ–Ω—Ç–∞—Ö, —Å—Ç—Ä–æ—è—â–∏–µ –ú–ö–°!

---

#### **2. –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π**
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–∏ –≤ –≥–ª–∞–≤–µ 2.2 –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```bash
php artisan migrate
```

**–í—ã–≤–æ–¥ –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ:**
```
Migration table created successfully.
Migrating: 2014_10_12_000000_create_users_table
Migrated:  2014_10_12_000000_create_users_table (25.12ms)
Migrating: 2014_10_12_100000_create_password_reset_tokens_table
Migrated:  2014_10_12_100000_create_password_reset_tokens_table (18.07ms)
Migrating: 2019_08_19_000000_create_failed_jobs_table
Migrated:  2019_08_19_000000_create_failed_jobs_table (21.33ms)
Migrating: 2019_12_14_000001_create_personal_access_tokens_table
Migrated:  2019_12_14_000001_create_personal_access_tokens_table (30.45ms)
Migrating: 2025_08_04_000000_create_planets_table
Migrated:  2025_08_04_000000_create_planets_table (15.67ms)  # –í–∞—à–∞ —Ç–∞–±–ª–∏—Ü–∞!
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ pgAdmin 4:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –±–∞–∑—É `space_api` ‚Üí Schemas ‚Üí Tables
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—è–≤–∏–ª–∏—Å—å:
   - `planets`
   - `users`
   - `password_reset_tokens`
   - ...

---

#### **3. –û—Ç–∫–∞—Ç –º–∏–≥—Ä–∞—Ü–∏–π: –ê–≤–∞—Ä–∏–π–Ω–æ–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ**
–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É:
```bash
php artisan migrate:rollback  # –û—Ç–∫–∞—Ç –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –ø–∞–∫–µ—Ç–∞ –º–∏–≥—Ä–∞—Ü–∏–π
```
```bash
php artisan migrate:reset    # –ü–æ–ª–Ω—ã–π –æ—Ç–∫–∞—Ç –≤—Å–µ—Ö –º–∏–≥—Ä–∞—Ü–∏–π
```

**–°—Ü–µ–Ω–∞—Ä–∏–π –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```bash
# –®–∞–≥ 1: –û—Ç–∫–∞—Ç
php artisan migrate:rollback

# –®–∞–≥ 2: –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º –º–∏–≥—Ä–∞—Ü–∏—é planets (–¥–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–µ –ø–æ–ª–µ)
# –®–∞–≥ 3: –ü–æ–≤—Ç–æ—Ä–Ω—ã–π –∑–∞–ø—É—Å–∫
php artisan migrate
```

---

#### **4. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π: –ú–æ–¥–µ—Ä–Ω–∏–∑–∞—Ü–∏—è —Å—Ç–∞–Ω—Ü–∏–∏**
**–ü—Ä–∏–º–µ—Ä:** –î–æ–±–∞–≤–∏–º –ø–æ–ª–µ `is_habitable` (–æ–±–∏—Ç–∞–µ–º–∞ –ª–∏ –ø–ª–∞–Ω–µ—Ç–∞).

**–®–∞–≥ 1: –°–æ–∑–¥–∞–µ–º –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é**
```bash
php artisan make:migration add_is_habitable_to_planets_table
```

**–®–∞–≥ 2: –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º —Ñ–∞–π–ª** `database/migrations/..._add_is_habitable_to_planets_table.php`
```php
public function up()
{
    Schema::table('planets', function (Blueprint $table) {
        $table->boolean('is_habitable')
              ->default(false)
              ->after('size_km');
    });
}

public function down()
{
    Schema::table('planets', function (Blueprint $table) {
        $table->dropColumn('is_habitable');
    });
}
```

**–®–∞–≥ 3: –ó–∞–ø—É—Å–∫–∞–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**
```bash
php artisan migrate
```

---

#### **5. –ù–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–∑—ã: –ü–µ—Ä–≤—ã–µ –ø–ª–∞–Ω–µ—Ç—ã**
–°–æ–∑–¥–∞–µ–º **—Å–∏–¥–µ—Ä (Seeder)** ‚Äî —Å–∫—Ä–∏–ø—Ç –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

**–®–∞–≥ 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–∏–¥–µ—Ä–∞**
```bash
php artisan make:seeder PlanetSeeder
```

**–®–∞–≥ 2: –†–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º** `database/seeders/PlanetSeeder.php`
```php
use App\Models\Planet;
use Illuminate\Database\Seeder;

class PlanetSeeder extends Seeder
{
    public function run()
    {
        Planet::create([
            'name' => '–ó–µ–º–ª—è',
            'description' => '–ì–æ–ª—É–±–∞—è –ø–ª–∞–Ω–µ—Ç–∞ —Å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π –∂–∏–∑–Ω—å—é',
            'size_km' => 12742,
            'solar_system' => '–°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞',
            'image_url' => 'https://example.com/earth.jpg',
            'is_habitable' => true
        ]);

        Planet::create([
            'name' => '–ú–∞—Ä—Å',
            'description' => '–ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞–Ω–µ—Ç–∞, —Ü–µ–ª—å –±—É–¥—É—â–∏—Ö –∫–æ–ª–æ–Ω–∏–∑–∞—Ü–∏–π',
            'size_km' => 6779,
            'solar_system' => '–°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞',
            'is_habitable' => false
        ]);
    }
}
```

**–®–∞–≥ 3: –†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º —Å–∏–¥–µ—Ä –≤** `database/seeders/DatabaseSeeder.php`
```php
public function run()
{
    $this->call([
        PlanetSeeder::class
    ]);
}
```

**–®–∞–≥ 4: –ó–∞–ø—É—Å–∫ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏—è**
```bash
php artisan db:seed
```

---

#### **6. –†–∞–±–æ—Ç–∞ —Å PostgreSQL: –°–ø–µ—Ü–∏—Ñ–∏–∫–∞**
**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ç–∏–ø–∞ –¥–∞–Ω–Ω—ã—Ö:**
| –û–ø–µ—Ä–∞—Ü–∏—è            | PostgreSQL                  | MySQL               |
|---------------------|----------------------------|---------------------|
| Boolean             | `boolean`                  | `tinyint(1)`        |
| Text —Å –¥–µ—Ñ–æ–ª—Ç–æ–º     | `text` (–Ω–µ `varchar`)      | `varchar`           |
| –ò–Ω–¥–µ–∫—Å—ã             | `$table->index('name')`    | –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ          |

**–ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –∏–Ω–¥–µ–∫—Å–∞:**
```php
// –í –º–∏–≥—Ä–∞—Ü–∏–∏
$table->index('solar_system');
```

---

#### **7. –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ psql**
–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–Ω—Å–æ–ª—å PostgreSQL:
```bash
psql -U postgres -d space_api
```
```sql
SELECT * FROM planets;
```
```
 id |  name  |                description                | size_km |  solar_system   | image_url | is_habitable
----+--------+------------------------------------------+---------+-----------------+-----------+--------------
  1 | –ó–µ–º–ª—è  | –ì–æ–ª—É–±–∞—è –ø–ª–∞–Ω–µ—Ç–∞ —Å —Ä–∞–∑–Ω–æ–æ–±—Ä–∞–∑–Ω–æ–π –∂–∏–∑–Ω—å—é   |   12742 | –°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞| ...       | t
  2 | –ú–∞—Ä—Å   | –ö—Ä–∞—Å–Ω–∞—è –ø–ª–∞–Ω–µ—Ç–∞, —Ü–µ–ª—å –∫–æ–ª–æ–Ω–∏–∑–∞—Ü–∏–π        |    6779 | –°–æ–ª–Ω–µ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞| null      | f
```

---

#### **–ö–≤–∏–∑ –¥–ª—è –∑–∞–∫—Ä–µ–ø–ª–µ–Ω–∏—è**
1. **–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –º–∏–≥—Ä–∞—Ü–∏–π:**
   a) `php artisan migrate:run`
   b) `php artisan migrate`
   c) `php artisan db:migrate`

2. **–ö–∞–∫ –æ—Ç–∫–∞—Ç–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω—é—é –º–∏–≥—Ä–∞—Ü–∏—é?**
   a) `migrate:undo`
   b) `migrate:rollback`
   c) `migrate:reset`

3. **–°–∏–¥–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è:**
   a) –£–¥–∞–ª–µ–Ω–∏—è —Ç–∞–±–ª–∏—Ü
   b) –ù–∞–ø–æ–ª–Ω–µ–Ω–∏—è –ë–î —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   c) –°–æ–∑–¥–∞–Ω–∏—è –º–æ–¥–µ–ª–µ–π

4. **–ú–µ—Ç–æ–¥ –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å—Ç–æ–ª–±—Ü–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â—É—é —Ç–∞–±–ª–∏—Ü—É:**
   a) `Schema::addColumn()`
   b) `Schema::table()`
   c) `Schema::modify()`

5. **–ì–¥–µ —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É—é—Ç—Å—è —Å–∏–¥–µ—Ä—ã?**
   a) `DatabaseSeeder.php`
   b) `.env`
   c) `config/database.php`

<details>
  <summary>üîç –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–≤–µ—Ç—ã</summary>

  **–ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:**
  1. b)
  2. b)
  3. b)
  4. b)
  5. a)
</details>

---

**üöÄ –ò—Ç–æ–≥ –≥–ª–∞–≤—ã:**
–í—ã –æ—Å–≤–æ–∏–ª–∏ "—Å—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ –∫–æ—Å–º–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã":
- ‚úÖ –°–æ–∑–¥–∞–ª–∏ –∏ –∑–∞–ø—É—Å—Ç–∏–ª–∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- üîß –ú–æ–¥–µ—Ä–Ω–∏–∑–∏—Ä–æ–≤–∞–ª–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—É —Ç–∞–±–ª–∏—Ü—ã
- üåç –ó–∞–ø–æ–ª–Ω–∏–ª–∏ –ë–î –ø–µ—Ä–≤—ã–º–∏ –ø–ª–∞–Ω–µ—Ç–∞–º–∏
- ‚öôÔ∏è –ù–∞—É—á–∏–ª–∏—Å—å —Ä–∞–±–æ—Ç–∞—Ç—å —Å PostgreSQL

**–í–∞—à–∞ –≤—Å–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–µ–ª–∞ –ø–µ—Ä–≤—ã–µ –º–∏—Ä—ã!** –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç—å –∫ —Å–æ–∑–¥–∞–Ω–∏—é API-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–ª–∞–Ω–µ—Ç–∞–º–∏.

> **üìå –ü—Ä–æ–≤–µ—Ä–∫–∞:**
> 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `php artisan tinker`
> 2. –í—ã–ø–æ–ª–Ω–∏—Ç–µ `App\Models\Planet::all()`
> 3. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤–∏–¥–∏—Ç–µ –ó–µ–º–ª—é –∏ –ú–∞—Ä—Å
> **‚ö†Ô∏è –ï—Å–ª–∏ –æ—à–∏–±–∫–∞:**
> - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ PostgreSQL –≤ `.env`
> - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–∏–¥–µ—Ä –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –≤ `DatabaseSeeder`
> - –ó–∞–ø—É—Å—Ç–∏—Ç–µ `composer dump-autoload` –ø–µ—Ä–µ–¥ `db:seed`

**–°–ª–µ–¥—É—é—â–∞—è –º–∏—Å—Å–∏—è:** [2.4 API –∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä PlanetController](controller)
