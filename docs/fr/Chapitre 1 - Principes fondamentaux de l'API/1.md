# **Chapitre 1.1 : Qu'est-ce qu'une API et pourquoi en a-t-on besoin ?**
**Temps d'√©tude :** 30 minutes

---

#### **1. Introduction : L'API comme "n≈ìud d'amarrage spatial"**
Imaginez que vous √™tes le commandant d'un vaisseau spatial. Pour connecter votre vaisseau √† l'ISS, vous avez besoin d'un **n≈ìud d'amarrage standard**. Sans lui, l'amarrage est impossible, m√™me si le vaisseau et la station sont parfaitement compatibles.

Une **API (Application Programming Interface)** est un "n≈ìud d'amarrage" similaire pour les programmes.
- C'est un ensemble de r√®gles qui permet √† diff√©rentes applications d'**√©changer des donn√©es** et de **travailler ensemble**.
- Exemple : lorsqu'une application mobile affiche la pr√©vision m√©t√©orologique, elle utilise l'API d'un service m√©t√©o.

> üí° **Analogie spatiale :**
> L'API est comme un protocole de communication entre la Terre et un rover martien. Le rover re√ßoit des commandes dans un format qu'il comprend (par exemple, "prendre une photo du crat√®re"), ex√©cute la t√¢che et renvoie les donn√©es.

---

#### **2. Pourquoi les API sont-elles n√©cessaires ?**
1. **Simplification du d√©veloppement**
   Au lieu de tout cr√©er √† partir de z√©ro, vous utilisez une API existante, comme l'**API SpaceX**.
   ```python
   # Exemple : R√©cup√©ration des donn√©es sur les lancements de SpaceX
   import requests
   response = requests.get("https://api.spacexdata.com/v3/missions")
   print(response.json()[0])  # Affichage des donn√©es
   ```

2. **Automatisation des processus**
   L'API permet aux sondes robotiques de transmettre automatiquement des donn√©es √† la Terre sans intervention manuelle.

3. **Int√©gration de syst√®mes**
   Comme l'amarrage des modules de l'ISS : une API connecte votre application aux syst√®mes de paiement, aux bases de donn√©es ou m√™me aux t√©lescopes !

4. **Acc√®s √† des donn√©es uniques**
   Par exemple, l'[API SpaceX](https://docs.spacexdata.com/) fournit des donn√©es r√©elles sur les lancements de fus√©es.

---

#### **3. Comment fonctionne une API ?**

- Le **Client** (votre programme) envoie une **requ√™te HTTP** au serveur.
- Le **Serveur** (par exemple, la NASA) traite la requ√™te et renvoie une **r√©ponse au format JSON**.
- Les **donn√©es** sont des "tr√©sors cosmiques" : coordonn√©es de l'ISS, photos de galaxies, liste d'exoplan√®tes.

> **‚ö° Exemple de requ√™te √† l'API "Open Notify" (ISS) :**
> ```bash
> curl "http://api.open-notify.org/iss-now.json"
> ```
> **R√©ponse :**
> ```json
> {
>   "message": "success",
>   "timestamp": 1725431234,
>   "iss_position": {
>     "latitude": "51.1234",
>     "longitude": "-120.5678"
>   }
> }
> ```

---

#### **4. Types d'API (Bref aper√ßu)**
| Type       | Exemple spatial                       | O√π est utilis√©e            |
|------------|---------------------------------------|----------------------------|
| **REST**   | Communication standard "Centre de Contr√¥le ‚Üî satellite" | Services web (90% des cas) |
| **GraphQL**| "Requ√™te personnalis√©e" (par exemple, "donne-moi seulement la taille et la masse de la plan√®te") | Syst√®mes complexes           |
| **SOAP**   | Comme le chiffrement radio dans les anciennes missions | Applications d'entreprise  |

Dans ce tutoriel, nous nous concentrerons sur l'**API REST** ‚Äî le format le plus populaire.

---

#### **5. Exemples d'API spatiales**
1. **NASA Open API** : Donn√©es sur les ast√©ro√Ødes, photos du t√©lescope Hubble.
2. **SpaceX API** : Informations sur les lancements, les fus√©es, les vaisseaux Dragon.
3. **Open Notify** : Position actuelle de l'ISS, nombre de personnes dans l'espace.

---

#### **Quiz interactif**

<style>
    #quiz-container {
        border-radius: 8px;
        padding: 20px;
        margin-top: 20px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .question {
        margin-bottom: 15px;
    }
    .question p {
        font-weight: bold;
        margin-bottom: 10px;
    }
    #quiz-container label {
        display: block;
        margin-bottom: 5px;
        cursor: pointer;
        padding: 5px;
        border-radius: 4px;
    }
    #quiz-container button {
        border: none;
        padding: 10px 20px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 16px;
        margin-top: 10px;
    }
    #quiz-container button:hover {
    }
    #quiz-results {
        margin-top: 20px;
        padding: 15px;
        border-radius: 5px;
    }
</style>

<div id="quiz-container">
  <form id="quiz-form">
    <div class="question">
      <p>1. Une API est...</p>
      <label><input type="radio" name="q1" value="a"> a) Une intelligence artificielle</label>
      <label><input type="radio" name="q1" value="b"> b) Un ensemble de r√®gles pour l'interaction des programmes</label>
      <label><input type="radio" name="q1" value="c"> c) Un langage de programmation</label>
    </div>
    <div class="question">
      <p>2. Pourquoi utiliser une API au lieu d'√©crire son propre code ?</p>
      <label><input type="radio" name="q2" value="a"> a) Pour gagner du temps</label>
      <label><input type="radio" name="q2" value="b"> b) Pour acc√©der √† des donn√©es uniques</label>
      <label><input type="radio" name="q2" value="c"> c) Les deux options</label>
    </div>
    <div class="question">
      <p>3. Quel format de donn√©es une API retourne-t-elle le plus souvent ?</p>
      <label><input type="radio" name="q3" value="a"> a) XML</label>
      <label><input type="radio" name="q3" value="b"> b) JSON</label>
      <label><input type="radio" name="q3" value="c"> c) TXT</label>
    </div>
    <div class="question">
    <button type="button" onclick="checkQuizAnswers()">V√©rifier</button>
  </form>
  <div id="quiz-results" style="display:none;"></div>
</div>

<script>
  function checkQuizAnswers() {
    const correctAnswers = { q1: 'b', q2: 'c', q3: 'b'};
    const form = document.getElementById('quiz-form');
    const resultsContainer = document.getElementById('quiz-results');
    let score = 0;
    let resultsHTML = '<h4>R√©sultats :</h4><ul>';

    for (const [question, correctAnswer] of Object.entries(correctAnswers)) {
      const questionDiv = form.querySelector(`input[name="${question}"]`).closest('.question');
      const labels = questionDiv.querySelectorAll('label');
      labels.forEach(l => {
          l.style.color = 'inherit';
          l.style.fontWeight = 'normal';
          l.style.border = 'none';
      });

      const userAnswer = form.elements[question] ? form.elements[question].value : undefined;

      if (userAnswer) {
        const selectedLabel = form.querySelector(`input[name="${question}"][value="${userAnswer}"]`).parentElement;
        if (userAnswer === correctAnswer) {
          score++;
          selectedLabel.style.color = '#28a745';
          selectedLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)} : <span style="color:#28a745;">Correct !</span></li>`;
        } else {
          selectedLabel.style.color = '#dc3545';
          selectedLabel.style.fontWeight = 'bold';
          const correctLabel = form.querySelector(`input[name="${question}"][value="${correctAnswer}"]`).parentElement;
          correctLabel.style.color = '#28a745';
          correctLabel.style.fontWeight = 'bold';
          resultsHTML += `<li>Question ${question.slice(1)} : <span style="color:#dc3545;">Incorrect.</span> R√©ponse correcte : <b>${correctAnswer.toUpperCase()}</b></li>`;
        }
      } else {
        resultsHTML += `<li>Question ${question.slice(1)} : <span style="color:#ffc107;">Pas de r√©ponse.</span></li>`;
      }
    }

    resultsHTML += `</ul><p><b>Votre score : ${score} sur ${Object.keys(correctAnswers).length}</b></p>`;
    resultsContainer.innerHTML = resultsHTML;
    resultsContainer.style.display = 'block';
  }
</script>

---

**üöÄ R√©sum√© du chapitre :**

Une API est la base du travail avec des donn√©es provenant de sources externes. Tout comme un astronaute ne peut pas travailler sans communication avec le Centre de Contr√¥le, un d√©veloppeur ne peut pas construire une application complexe sans API. Dans le prochain chapitre, nous apprendrons comment envoyer des "commandes" au serveur √† l'aide des m√©thodes HTTP !

> **üìå Astuce :** Essayez d'effectuer une requ√™te √† l'[API Open Notify](http://api.open-notify.org/) pour savoir o√π se trouve l'ISS actuellement ! (Vous pouvez le faire m√™me avec une simple console)